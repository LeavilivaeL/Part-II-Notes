\documentclass[10pt,a4paper]{article}
\input{./preamble.tex}

\title{Number Fields}
\begin{document}
\maketitle

\section{Algebraic Numbers and Algebraic Integers; Number Fields}
Here, we will use $F$ to denote any field containing $\Q$, for instance $F = \C$. Recall that an element $\alpha \in F$ is \emph{algebraic} (over $\Q$) if it is the root of some polynomial in $\Q[x]$. If so, there is a unique monic polynomial $m_{\alpha} \in \Q[x]$ of minimal degree with $m_{\alpha}(\alpha) = 0$, called the \emph{minimal polynomial} of $\alpha$. The \emph{degree} of $\alpha$ is the degree of $m_{\alpha}$

\begin{proposition}
Suppose $\alpha \in F$ is algebraic. Then $m_{\alpha}$ is irreducible in $\Q[x]$, and if $f \in \Q[x]$, then $f(\alpha) = 0 \iff m_{\alpha} | f$.
\end{proposition}
\begin{proof}
If $m_{\alpha} = fg$, then $f(\alpha)g(\alpha) = 0$, and since fields are integral domains we have $f(\alpha) = 0$ or $g(\alpha) = 0$. By minimality of degree, $f$ or $g$ is constant.

If $f(\alpha) = 0$, we write $f = gm_{\alpha} + h$, with $g, h \in \Q[x]$, and $\deg h < \deg m_{\alpha}$. Then $h(\alpha) = f(\alpha) - g(\alpha)m_{\alpha}(\alpha) = 0$, and so by minimality $h = 0$ and $m_{\alpha}|f$.

I.e. $\{f : f(\alpha) = 0\}$ is a principal ideal in $\Q[x]$ generated by $m_{\alpha}$
\end{proof}

If $\alpha \in F$, define $\Q(\alpha)$ to be the smallest subfield of $F$ containing $\alpha$. Explicitly, it can be shown that $\Q(\alpha) = \left\{ \frac{f(\alpha)}{g(\alpha)} : f, g \in \Q[x], g(\alpha) \neq 0\right\}$.

\begin{proposition}
If $\alpha \in F$ is algebraic of degree $n$, then $1, \alpha, \ldots, \alpha^{n-1}$ is a $\Q$-basis for $\Q(\alpha)$. Conversely, if $[\Q(\alpha: \Q] \coloneqq \dim_{\Q} \Q(\alpha)$ is finite, say $n$, then $\alpha$ is algebraic of degree $n$.
\end{proposition}
\begin{proof}
Consider the homomorphism $\phi:\Q[x] \to F; f\mapsto f(\alpha)$. Then $\ker(\phi) = (m_\alpha)$ which is maximal, so $\Image \phi$ is a field, and hence equal to $\Q(\alpha)$. As $\deg m_{\alpha} = n$, a basis for $\Q[x]/(m_\alpha)$ is $1, x, \ldots, x^{n-1}$, and hence $1, \alpha, \ldots, \alpha^{n-1}$ is a basis for $\Q(\alpha)$.

For the converse part, if $[\Q(\alpha):\Q] = n < \infty$, then $1, \alpha, \ldots, \alpha^n$ are linearly dependent and so $\alpha$ is algebraic of some degree. By the first part, this degree is $n$.
\end{proof}

\begin{proposition}
$\{\alpha \in F : \alpha$ algebraic$\}$ is a subfield of $F$.
\end{proposition}
\begin{proof}[Galois theory]
It is enough to prove that it is closed under $+, \times$ and inverse. For $+$ and $\times$ see \textbf{1.6} below for a stronger statement. If $0 \neq \alpha$ is algebraic, then $\sum^n b_j \alpha^j = 0 \implies \sum^n b_{n-j}(\alpha^{-1})^j = 0$, and so $\alpha^{-1}$ is algebraic.
\end{proof}

$\alpha \in F$ is an \emph{algebraic integer} if there is a monic polynomial $f \in \Z[x]$ with $f(\alpha) = 0$.
\stepcounter{theorem}

\begin{lemma}
\item
\begin{enumerate}
\item Let $\alpha \in F$. Then the following are equivalent:
\begin{enumerate}
\item $\alpha$ is an algebraic integer
\item $\alpha$ is algebraic and $m_\alpha \in \Z[x]$
\item $\Z[\alpha]$ is a finitely generated $\Z$-module
\end{enumerate}
If these hold, then $1, \alpha, \ldots, \alpha^{d-1}$ is a $\Z$-bases for $\Z[\alpha]$, with $d = \deg \alpha$.
\item $\alpha \in \Q$ is an algebraic integer $\iff \alpha \in \Z$
\end{enumerate}
\end{lemma}
Recall the notation that, if $\alpha_1, \ldots, \alpha_n \in F$, then $\Z[\alpha_1, \ldots, \alpha_n]$ is the smallest subring of $F$ containing $\{\alpha_i:i\in[n]\}$, i.e. the set of all finite sums of terms of the form $A\alpha_1^{i_1}\ldots\alpha_n^{i_n}$ for $A, i_1, \ldots, i_n \in \Z$.

\begin{proof}\item
\begin{enumerate}
\item
\begin{enumerate}
\imp{a}{b} Suppose $f(\alpha) = 0, f \in \Z[x]$, $f$ monic. Then \textbf{1.1} gives that $f = gm_{\alpha}$ for some $g \in \Q[x]$ necessarily monic. Gauss's lemma from GRM gives us that $m_{\alpha}, g$ are in $\Z[x]$.

\imp{b}{c} Write $m_{\alpha} = x^d + \sum_{j=1}^{d-1} b_j x^j$, for $b_j \in \Z$. Then $\alpha^d = -\sum_{j=1}^{d-1} b_j \alpha^j$, from which we say that every $\alpha^n$ is a $\Z$-linear combination of $1, \alpha, \ldots, \alpha^{d-1}$. So $\Z[\alpha]$ is generated by $1, \alpha, \ldots, \alpha^{d-1}$ as a $\Z$-module. There is no linear relation between $1, \alpha, \ldots, \alpha^{d-1}$, as $d = \deg \alpha$. So $\Z[\alpha]$ is finitely generated and $1, \alpha, \ldots, \alpha^{d-1}$ is a $\Z$-basis.

\imp{c}{a} Assume $\Z[\alpha]$ is finitely generated by $g_1(\alpha), \ldots, g_r(\alpha)$. For some $g_i \in \Z[x]$. Let $k = \max\{\deg g_i\}$. Then $\Z[\alpha]$ is certainly generated by $1, \alpha, \ldots, \alpha^k$ as a $\Z$-module. So $\alpha^{k+1} = \sum_{j=0}^k b_j \alpha^j$ for $b_j \in \Z$, and so $\alpha$ is an algebraic integer.
\end{enumerate}
\item $\alpha \in \Q \implies m_{\alpha} = x-\alpha$, and so $\alpha$ is an algebraic integer $\iff \alpha \in \Z$ using $(a) \iff (b)$.
\end{enumerate}
\end{proof}

\begin{theorem}
If $\alpha, \beta \in F$ are algebraic integers, then so are $\alpha\beta, \alpha\pm\beta$.
\end{theorem}
\begin{proof}
The $\Z$-module $\Z[\alpha,\beta]$ is generated by $\{\alpha^i\beta^j : 0 \leq i < \deg \alpha; 0 \leq j < \deg \beta\}$, and so is finitely generated. Hence so is the submodule $\Z[\alpha\beta]\subseteq \Z[\alpha,\beta]$. So $\alpha\beta$ is an algebraic integer by \textbf{1.4}. The same applies for $\alpha+\beta, \alpha-\beta$.
\end{proof}

Now to introduce the main characters of this course:

An \emph{algebraic number field} (or just \emph{number field}) is a field $K \supset \Q$ which is a finite extension, i.e. $[K:\Q] < \infty$. The \emph{ring of integers of K}, written $\o_K$, is the set of algebraic integers in $K$. By \textbf{1.6} it is a ring. It is useful to have the converse:

\begin{proposition}
Let $\alpha \in F$ be algebraic. Then for some $0 \neq b \in \Z, b\alpha$ is an algebraic integer.
\end{proposition}
\begin{proof}
Exercise.
\end{proof}

\begin{theorem}[Primitive Element]
If $K$ is a number field, then $K = \Q(\alpha)$ for some $\alpha \in K$.
\end{theorem}
\begin{proof}
Done in Galois theory.
\end{proof}

\section{Quadratic Fields}
$K$ is a \emph{quadratic field} if $[K:\Q] = 2$. In this case, let $\alpha \in K \setminus \Q$. The minimal polynomial $m_{\alpha}$ is a quadratic, and so solving we get $\alpha = x+\sqrt{y}\footnote{By $\sqrt{y}$ we just mean some $\beta \in K$ with $\beta^2 = y$}$ for $x,y \in \Q, y \neq 0$. Since $y$ is not a rational square, we can write $y$ uniquely as $z^2 d$ for $z \in \Q\setminus\{0\}$, $d\neq 0,1$ a square-free integer. So $K = \Q(\sqrt{d}) = \Q[x]/(x^2-d)$. If $d' \neq d$ also square-free, then $\Q(\sqrt{d}) \ncong \Q(\sqrt{d'})$.

Now we want to compute $\o_K$. Let $\alpha = u + v\sqrt{d} \in K$ for $u, v \in \Q$. If $v = 0, \alpha \in \o_K \iff \alpha \in \Z$. Otherwise, $\alpha \notin \Q$, and $m_{\alpha} = x^2 - 2ux + (u^2-dv^2)$. So $\alpha \in \o_{K} \iff 2u \in \Z$ and $u^2-dv^2 \in \Z$.

If $u \in \Z$, then $dv^2 \in \Z$, and since $d$ is square-free, we must have $v \in \Z$. Otherwise, $u = \frac{2a+1}{2}, a \in \Z$, and we must have $4dv^2 - (2a+1)^2 \in 4\Z$, which holds if and only if $v = \frac{k}{2}, k \in \Z$ and $dk^2 \equiv 1 \mod 4$. If $d \equiv 1 \mod 4$, this holds if and only if $k$ is odd, and if $d$ is not $1\mod 4$, then this congruence cannot hold.

In conclusion,
\begin{theorem}
If $d \in \Z\setminus\{0,1\}$ is square-free, and $K = \Q(\sqrt{d})$, then:
\begin{enumerate}
\item If $d \nequiv 1 \mod 4$, then $\o_K = \{u + v\sqrt{d} : u, v \in \Z\} = \Z[\sqrt{d}]$.
\item If $d \equiv 1 \mod 4$, then $\o_K = \{u + v\sqrt{d}: u, v \in \frac12\Z, u-v\in \Z\} = \Z[\frac{1+\sqrt{d}}{2}]$
\end{enumerate}
\end{theorem}

\underline{Examples:} If $d = -3$, then $\o_{\Q(\sqrt{-3})} = \Z[\frac{1+\sqrt{-3}}{2}] = \Z[\xi_3]$.

Note that, for a general number field $K$, we needn't have $\o_K = \Z[\alpha]$ for $\alpha \in K$, and in fact for $\deg K > 2$ this method is unlikely to be practical for computing $\o_K$.

\section{Embeddings}
Let $K$ be a number field with $[K:\Q] = n$.

\begin{theorem}
There are precisely $n$ homomorphisms $\sigma_i:K \injection \C$. These are called the \emph{complex embeddings} of $K$. More generally, if $\Q\subset F\subset K$ are number fields, then each of the $[F:\Q]$ complex embeddings of $F$ extend to exactly $[K:F]$ complex embeddings of $K$.
\end{theorem}
\begin{proof}[Proof. (Galois Theory)]
Assume $K = \Q(\theta) = \Q[x]/(m_\theta)$ by the theorem of the primitive element. Then to give $\sigma: K \injection \C$ is the same as to give $\phi:\Q[x]\to \C$ with $\phi(m_{\theta}) = 0$. If $z = \phi(x)$, then $\phi(m_\theta) = m_\theta(z)$, giving a bijection $\{\sigma:K \injection \C\} \leftrightarrow \{$roots of $m_{\theta} \in \C\}$, coming from $\sigma \mapsto \sigma(\theta)$. The second part is the same as the first, but replacing $\Q$ by $F$ since $\theta$ has degree $[K:F]$ over $F$.
\end{proof}

\underline{Remarks:}
\begin{enumerate}
\item If $K \subset \C$ we can choose $\sigma$ to be the inclusion.
\item For some $r \in \{0, \ldots, n\}$, exactly $r$ of the $\sigma_{i}$ will be \emph{real}, i.e. $\sigma_{i}(K) \subseteq \R$. The remaining embeddings will then come in complex conjugate pairs $\sigma_i, \overline{\sigma_i}$. So $n = r+2s$, where $r$ is the number of real embeddings, and $s$ is the number of complex conjugate pairs of embeddings.
\end{enumerate}\newpage

\hspace*{-1em}\underline{Examples:} 
\begin{itemize}
\item[$\Q(\sqrt{d})$.] We have two cases:
\begin{itemize}
\item[$d>0$.] There are $2$ real embeddings: $\sigma_1:\sqrt{d} \mapsto +\sqrt{d} \in \R$, and $\sigma_2:\sqrt{d} \mapsto -\sqrt{d} \in \R$. So $(r,s) = (2, 0)$.
\item[$d<0$.] There is now one pair of complex embeddings, given by $\sigma_1:\sqrt{d} \to \im \sqrt{|d|}; \sigma_2:\sqrt{d}\to -\im\sqrt{|d|}$. So $(r,s) = (0,1)$.
\end{itemize}
\item[$\Q(\cbrt{2})$.] We have 1 real embedding $\cbrt{2} \mapsto \cbrt{2} \in \R$, and the two complex embeddings $\cbrt{2} \mapsto \omega^{\pm 1}\cbrt{2} \in \C$, so $(r, s) = (1,1)$.
\end{itemize}

\begin{proposition}
If $\alpha \in K$, then the complex numbers $\sigma_i(\alpha)$ are the complex roots of $m_\alpha$, each taken $n/\deg(\alpha)$ times.
\end{proposition}
\begin{proof}
Apply the 2\th[nd] part of \textbf{3.1} with $F = \Q(\alpha)$.
\end{proof}

\section{Norm and Trace}
Given $K$ a number field, $\alpha \in K$, define a map $u_{\alpha}: K \to K$ by $u_{\alpha}(x) = \alpha x$. $K$ is a $\Q$-vector space, and $u_{\alpha}$ is a $\Q$-linear map.  Define:
\begin{itemize}
\item $f_{\alpha}$ to be the \emph{characteristic polynomial} of $u_{\alpha}$, so $f_{\alpha} = \det(x-u_{\alpha}) \in \Q[x]$, monic
\item $\Nn_{K/\Q}(\alpha) = \det(u_{\alpha}) \in \Q$, the \emph{norm} of $\alpha$
\item $\Tr_{K/\Q}(\alpha) = \tr(u_{\alpha}) \in \Q$, the \emph{trace} of $\alpha$ 
\end{itemize}
More explicitly, let $\beta_1, \ldots, \beta_n$ be a $\Q$-basis for $K$. Then $\alpha\beta_i = \sum_{j=1}^n A_{ji}\beta_j$ for some $A \in M_{n,n}(\Q)$. Then $f_{\alpha} = \det(x\cdot I_n - A), \Nn_{K/\Q}(\alpha) = \det(A), \Tr_{K/\Q} = \tr(A)$. As an exercise, work these out for $\Q(\sqrt{d})$.

\begin{proposition}
\begin{align*}
\Nn_{K/\Q}(\alpha\beta) &= \Nn_{K/\Q}(\alpha)\Nn_{K/\Q}(\beta)\\
\Tr_{K/\Q}(\alpha+\beta) &= \Tr_{K/\Q}(\alpha) + \Tr_{K/\Q}(\beta)
\end{align*}
\end{proposition}
\begin{proof}
From the definition, $u_{\alpha\beta} = u_{\alpha}u_{\beta}$, and $u_{\alpha+\beta} = u_{\alpha} + u_{\beta}$, so the result follows from linear algebra.
\end{proof}

\begin{theorem}
\item
\begin{enumerate}
\item The minimal polynomial of $u_{\alpha}$ is $m_{\alpha}$, and $f_{\alpha} \prod_{i=1}^n(x-\sigma_i(\alpha)) = m_{\alpha}^{n/d}$, where $\deg(\alpha) = d$.

\item $\Nn_{K/\Q}(\alpha) = \prod_{i=1}^n \sigma_i(\alpha), \Tr_{K/\Q}(\alpha) = \sum_{i=1}^n \sigma_i(\alpha)$.
\end{enumerate}
We call the $\sigma_i(\alpha)$ the \emph{conjugates} of $\alpha$.
\end{theorem}
\begin{proof}
Note that \textit{1.}$\implies$\textit{2.}, because $\det u_{\alpha} = (-1)^n f_{\alpha}(0)$, the product of the eigenvalues, and $\tr u_{\alpha} = -($coeff. of $ x^{n-1}$ in $f_\alpha)$.

For \textit{1.}, we first do the case $\deg \alpha = n$, i.e. $K = \Q(\alpha)$. Then $f_\alpha, m_\alpha \in \Q[x]$ are monic of degree $n$, and if $\beta \in K$ then $f_{\alpha}(\alpha)\beta = f_{\alpha}(u_{\alpha})\beta = 0$ by Cayley-Hamilton. So $f_\alpha(\alpha) = 0 \implies m_\alpha = f_\alpha$.

In general, if $[K:\Q(\alpha)] = \frac{n}{d}$, then $K \cong \Q(\alpha)^{\oplus(n/d)}$, and then $f_\alpha = ($char. poly. of $u_\alpha$ on $\Q(\alpha))^{n/d} = m_\alpha^{n/d} = \prod_{i=1}^n (x-\sigma_i(\alpha))$.
\end{proof}
\begin{corollary}
\item
\begin{enumerate}
\item Let $\alpha \in K$. Then $\alpha = 0 \iff \Nn_{K/\Q}(\alpha) = 0$.
\item Let $\alpha \in \o_K$. Then $f_{\alpha} \in \Z[x]$, and $\Nn_{K/\Q}(\alpha), \Tr_{K/\Q}(\alpha) \in \Z$. Moreover, $\Nn_{K/\Q}(\alpha) \in \{\pm 1\}$ if and only if $\alpha \in \o_k^{\ast}$ is a \emph{unit}, i.e. $\alpha^{-1} \in \o_k$.
\end{enumerate}
\end{corollary}
\begin{proof}
\item
\begin{enumerate}
\item $\alpha = 0 \iff \sigma_i(\alpha) = 0$ for all $i$.
\item $m_\alpha \in \Z[x]$, so $f_\alpha \in \Z[x]$, and hence $\Nn_{K/\Q}(\alpha), \Tr_{K/\Q}(\alpha) \in \Z$, since they are coefficients of $f_{\alpha}$ up to a choice of sign. 

If $\alpha$ is a unit, then $\Nn_{K/\Q}(\alpha)\Nn_{K/\Q}(\alpha^{-1}) = \Nn_{K/\Q}(\alpha\alpha^{-1}) = \Nn_{K/\Q}(1) = 1$, and so $\Nn_{K/\Q}(\alpha)$ is a unit and an integer, so in $\{\pm 1\}$.

If $\Nn_{K/\Q}(\alpha) \in \{\pm 1\}, f_\alpha = x^n + \sum_{i=1}^{n-1} b_i x^i \pm 1$, so $f_\alpha(\alpha) = 0 \implies \alpha\cdot\left(\alpha^{n-1}+\sum_{i=1}^{n-1}b_i\alpha^{i-1}\right) = \mp 1$, so $\alpha^{-1} \in \o_K$ and we have an explicit representation of $\alpha^{-1}$.
\end{enumerate}
\end{proof}

Note that we can also define, if $\Q \subset F \subset K$ the relative trace $\Tr_{K/F}(\alpha), \Nn_{K/F}(\alpha)$ as the trace/determinant of $u_{\alpha}$ viewed as an $F$-linear map from $K \simeq F^{[K:F]}$ to itself, and we have that:
\begin{align*}
\Tr_{K/\Q} = \Tr_{F/\Q}\cdot\Tr_{K/F}\;\;\;\;\;\;\;\;\; \Nn_{K/\Q} = \Nn_{F/\Q}\cdot\Nn_{K/F}
\end{align*}

\section{Some Modules from GRM}
\begin{proposition}
$G$ is a finitely generated abelian group written additively with no torsion, i.e. no elements of finite order, and a finite set of generators $x_1, \ldots, x_n$. Let $H \subset G$ be the subgroup generated by $y_1, \ldots, y_n \in G$, where $y_i = \sum_{j=1}^n A_{ji}x_j$ for some $A \in Mat_{n,n}(\Z)$ Then if $\det(A) \neq 0$, $H$ has finite index in $G$, with $(G:H) = |\det A|$.
\end{proposition}
\begin{proof}
Using Smith normal form, $A = PDQ$ for $P,Q,D$ integer $n\times n$ matrices where $\det P, \det Q \in \{\pm 1\}$ and $D = diag(d_1, \ldots, d_n)$ for $d_i \geq 0$, $d_i | d_{i+1}$. Then $G/H \cong \Z/d_1\Z \times \ldots \times \Z/d_n\Z$, where $\Z/0\Z = \Z$.

Hence if $|\det A| = \prod_i d_i \neq 0$, then $G/H$ contains no $\Z$ terms and has dimension $\prod_i d_i = |\det A|$.
\end{proof}

Let $V$ be a $\Q$-vector space, and $\dim(V) = n < \infty$. Let $H \subset V$ be a subgroup, viewed as a sub-$\Z$-module. Then define:
\begin{align*}
\rank(H) = \dim(\spann(H)) \in \{0, 1, \ldots, n\}
\end{align*}
\begin{proposition}
If $H$ is finitely generated as an abelian group then $H = \bigoplus_{i=1}^r \Z v_i$ where $r = \rank(H)$ and $x_1, \ldots, x_r \in V$ are linearly independent.
\end{proposition}
\begin{proof}
$H$ has no torsion as $V$ is a $\Q$-vector space, so by classification $H$ is an abelian group freely generated by some $x_1, \ldots, x_r$. If $a_i \in \Q$ and $\sum a_i x_i = 0$ in $V$, then clearing denominators we have $\sum b_i x_i = 0$ with $b_i \in \Z$. So we must have $b_i = 0$ for all $i$, so $a_i = 0$ and the $x_i$ are linearly independent, and $r = \rank(H)$ by the definition of rank.
\end{proof}

\section{Discriminants and Integral Bases}
Let $\alpha_1, \ldots, \alpha_n \in K$. Define the \emph{discriminant}
\begin{align*}
\Disc(\alpha_1) = \Disc(\alpha_1, \ldots, \alpha_n) = \det(\Tr_{K/\Q}(\alpha_i\alpha_j))) \in \Q
\end{align*}
\begin{theorem}
\item
\begin{enumerate}
\item $\Disc(\alpha_1, \ldots, \alpha_n) = \det(\sigma_i(\alpha_j))^2$.
\item $\Disc(\alpha_i) \neq 0  \iff \alpha_1, \ldots, \alpha_n$ is a $\Q$-basis for $K$.
\item If $\beta_i = \sum_{j=1}^n A_{ji}\alpha_j$ for $A \in Mat_{n,n}(\Q)$, then $\Disc(\beta_i) = (\det A)^2\Disc(\alpha_i)$
\item Suppose $(\alpha_i)$ is a $\Q$-basis. Then $\Disc(\alpha_i)$ depends only on the subgroup $\Z\alpha_1+\ldots+\Z\alpha_n \in K$.
\end{enumerate}
\end{theorem}
\begin{proof}
\item
\begin{enumerate}
\item Let $\Delta = (\sigma_i(\alpha_j))_{ij} \in Mat_{n,n}(\C)$. Then $(\Delta^\intercal\Delta)_{ij} = \sum_{k=1}^n \sigma_k(\alpha_i)\sigma_k(\alpha_j) = \sum_{k=1}^n \sigma_k(\alpha_i\alpha_j) = \Tr_{K/\Q}(\alpha_i\alpha_j)$

So $(\det \Delta)^2 = \det(\Delta^\intercal\Delta) = \det\Tr_{K/\Q}(\alpha_i\alpha_j)$.

\item If $\alpha_1, \ldots, \alpha_n$ is not a $\Q$-basis, then there are some $b_1, \ldots, b_n \in \Q$, not all $0$, with $\sum b_j\alpha_j = 0$. Then for all $i$, $0 = \sigma_i\left(\sum_{j=1}^n b_j\alpha_j\right) = \sum_{j=1}^n b_j\sigma_i(\alpha_j)$, so $\det \Delta = 0$, hence $\disc(\alpha_i) = 0$.

For the other direction, suppose $(\alpha_i)$ is a $\Q$-basis for $K$, and let $T = (\Tr_{K/\Q}(\alpha_i\alpha_j))_{ij}$. It is enough to prove that, for $b \in \Q^n\setminus\{0\}, Tb \neq 0$, or equivalently that there is $c \in \Q^n$ such that $c^\intercal Tb \neq 0$. But if $\beta  = \sum_j jb_j\alpha_j, \gamma = \sum_j c_j\alpha_j$, then $c^\intercal T b = \sum_{i,j} c_i \Tr_{K/\Q}(\alpha_i\alpha_j)b_j = \Tr_{K/\Q}(\sum_{i,j}c_ib_j\alpha_i\alpha_j ) = \Tr_{K/\Q}(\beta\gamma)$, so taking $\gamma = \frac1\beta$, we get $\Tr_{K/\Q}(1) = n \neq 0$.

\item $\Delta = (\sigma_i(\alpha_j)), \Delta' = (\sigma_i(\beta_j))$, so $\Delta'_{ij} = \sum_k \sigma_i(A_{kj}\alpha_k) = \sum_{k} A_{kj}\sigma_i(\alpha_k) = (\delta A)_{ij}$. Hence $\det \Delta' = \det \Delta \det A$, and result follows by part 1.

\item If $(\alpha_i), (\beta_i)$, generate the same subgroup, then $\beta_i = \sum A_{ji}\alpha_j$, where $A_{ij} \in \Z, \det A \in \{\pm 1\}$. Then by part 3, $\Disc(\beta_i) = (\det A)^2 \Disc(\alpha_i) = \Disc(\alpha_i)$.
\end{enumerate}
\end{proof}


If $H \subset K$ is a finitely generated subgroup of rank $n$, and $(\alpha_1, \ldots, \alpha_n)$ is a $\Z$-basis for $H$, then above implies that $\Disc(\alpha_1, \ldots, \alpha_n)$ is a non-zero rational, depending only on $H$, which we call $\Disc(H)$.

\begin{lemma} If $H \subset H' \subset K$ are finitely generated subgroups of rank $n$, then
\begin{align*}
\Disc(H) = (H':H)^2\Disc(H')
\end{align*}
\end{lemma}
\begin{proof}
Pick $\Z$-bases $(\alpha_i), (\alpha_i')$ for $H, H'$. Then $\alpha_i = \sum_j B_{ji} \alpha'_j$, for $B \in Mat_{n,n}(\Z)$. Then by \textbf{6.1}\textit{(3.)}, together with \textbf{5.1}, give that:
\begin{align*}
(H':H)^2 = (\det B)^2 = \Disc(H)/\Disc(H')
\end{align*}
\end{proof}

\begin{theorem}
There exist $\omega_1, \ldots, \omega_n \in \o_K$ such that $\o_K = \Z\omega_1\oplus\ldots\oplus\Z\omega_n$ (i.e. that $\o_K$ is finitely generated as a $\Z$-module). We say that $(\omega_i)$ is an \emph{integral basis} for $K$.
\end{theorem}
\begin{proof}
Certainly, there is $\omega_1, \ldots, \omega_n \in \o_K$ which form a $\Q$-basis for $K$ - take any $\Q$-basis of $K$ and multiply by a suitable non-zero integer. Then for such a basis, $\Disc(H) \in \Z\setminus\{0\}$ where $H = \sum_i \Z\omega_i \subset K$.

Choose such a basis with $|\Disc(H)|$ minimal. Then let $\alpha \in \o_K$, and let $H' = \Z\alpha + H \subset K$. Then $H' \subset H$ are finitely generated of rank $n$, and so by \textbf{6.2}, $\Disc(H) = (H':H)^2\Disc(H')$, and by minimality of $\Disc(H), H' = H$, so $\alpha \in H$.
\end{proof}

The \emph{discriminant of K} $d_K = \Disc(\o_K) = \Disc(\omega_i)$ for any integral basis $(\omega_i)$.

\hspace*{-1em}\underline{Example:} Let $K = \Q(\sqrt{d})$ for $d$ a square free integer not 0 or 1.
\begin{itemize}
\item[$d \nequiv 1 \mod 4$:] An integral basis is $\{1, \sqrt{d}\}$ and so we have $\Delta = (\sigma_i(\alpha_k)) = \begin{pmatrix} 1 & \delta \\ 1 & -\delta\end{pmatrix}$, where $\sigma_1(\sqrt{d}) = \delta, \sigma_2(\sqrt{d}) = -\delta, \delta^2 = d$, and so $d_K = (\det \Delta)^2 = 4d$.

\item[$d \equiv 1 \mod 4$:] An integral basis is $\{1, \frac{1+\sqrt{d}}{2}$. Then $d_K = (\det \Delta)^2 = \left|\begin{pmatrix} 1 & (1+\delta)/2 \\ 1 & (1-\delta)/2 \end{pmatrix}\right|^2 = d$.
\end{itemize}

We will now have a few useful results to help with computation of discriminants:
\begin{proposition}
Suppose $K = \Q(\theta)$, and $f = m_{\theta}$ is the minimal polynomial of $\theta$. Then:
\begin{align*}
\Disc(1, \theta, \ldots, \theta^{n-1}) = \prod_{i<j} \left(\sigma_i(\theta) - \sigma_j(\theta)\right)^2 = (-1)^{n(n-1)/2}\Nn_{K/\Q}(f'(\theta))
\end{align*}
\end{proposition}
\begin{proof}
Recall the \emph{Vandermonde determinant:}
\begin{align*}
\vdm(x_1, \ldots, x_n) = \left|\begin{pmatrix}
x_1^{n-1} & x_2^{n-1} & \cdots & x_n^{n-1} \\ \vdots & \vdots & \ddots & \vdots \\ x_1 & x_2 & \cdots & x_n \\ 1 & 1 & \cdots & 1 \end{pmatrix}\right| = \prod_{i<j} (x_i - x_j)
\end{align*}
Then $\Disc(1, \ldots, \theta^{n-1}) = \vdm(\sigma_1(\theta), \ldots, \sigma_n(\theta))^2$, giving the first equality. For the second, see example sheet 1 q.7.
\end{proof}

\begin{proposition}
Let $\omega_1, \ldots, \omega_n \in \o_K$ with $\Disc(\omega_i)$ squarefree. Then $(\omega_i)$ is an integral basis.\footnote{The converse is false, e.g. for $\Q(\sqrt{d})$ with $d \nequiv 1 \mod 4$ gives $d_K = 4d$, which is not squarefree.}
\end{proposition}
\begin{proof}
Let $H = \sum \Z \omega_j \subset \o_K$. Then \textbf{6.2} implies that $\Disc(\omega_i) = (\o_k:H)^2 \Disc(\o_k)$. Since $\Disc(\omega_i)$ is squarefree, then $(\o_K:H) = 1$ and $\o_K = H$.
\end{proof}

\section{Ideals I}
\underline{Example:} $\Q(\sqrt{-5}) = K$, $\o_K = \Z[\sqrt{-5}].$ Then $6=2\cdot 2 = (1+\sqrt{-5})(1-\sqrt{-5})$, and so $\o_K$ is not a UFD. But it turns out that we can restore unique factorisation by replacing elements of $\o_K$ by ideals. 












\end{document}