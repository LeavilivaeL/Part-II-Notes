\documentclass[10pt,a4paper,rgb]{article}
\newcommand{\A}{\mathbb{A}}

\input{./preamble.tex}

\usetikzlibrary{svg.path}
\definecolor{gG}{RGB}{ 60, 186,  84}
\definecolor{gY}{RGB}{244, 194,  13}
\definecolor{gB}{RGB}{ 72, 133, 237}
\definecolor{gR}{RGB}{219,  50,  54}
\newlength\htG
\protected\def\google{\settoheight{\htG}{G}%
  \begin{tikzpicture}[yscale=-1,scale=(\htG/240pt),baseline=(baseline)]
    \fill[fill=gG] svg {m797.49 249.7h35.975v-240.75h-35.975z};
    \coordinate (baseline) at (current bounding box.south);
    \fill[fill=gB] svg {m246.11 116.18h-116.57v34.591h82.673c-4.0842 48.506-44.44 69.192-82.533 69.192-48.736 0-91.264-38.346-91.264-92.092 0-52.357 40.54-92.679 91.371-92.679 39.217 0 62.326 25 62.326 25l24.22-25.081s-31.087-34.608-87.784-34.608c-72.197-0.001-128.05 60.933-128.05 126.75 0 64.493 52.539 127.38 129.89 127.38 68.031 0 117.83-46.604 117.83-115.52 0-14.539-2.1109-22.942-2.1109-22.942z};
    \fill[fill=gR] svg {m341.6 91.129c-47.832 0-82.111 37.395-82.111 81.008 0 44.258 33.249 82.348 82.673 82.348 44.742 0 81.397-34.197 81.397-81.397 0-54.098-42.638-81.959-81.959-81.959zm0.47563 32.083c23.522 0 45.812 19.017 45.812 49.66 0 29.993-22.195 49.552-45.92 49.552-26.068 0-46.633-20.878-46.633-49.79 0-28.292 20.31-49.422 46.741-49.422z};
    \fill[fill=gY] svg {m520.18 91.129c-47.832 0-82.111 37.395-82.111 81.008 0 44.258 33.249 82.348 82.673 82.348 44.742 0 81.397-34.197 81.397-81.397 0-54.098-42.638-81.959-81.959-81.959zm0.47562 32.083c23.522 0 45.812 19.017 45.812 49.66 0 29.993-22.195 49.552-45.92 49.552-26.068 0-46.633-20.878-46.633-49.79 0-28.292 20.31-49.422 46.741-49.422z};
    \fill[fill=gB] svg {m695.34 91.215c-43.904 0-78.414 38.453-78.414 81.613 0 49.163 40.009 81.765 77.657 81.765 23.279 0 35.657-9.2405 44.796-19.847v16.106c0 28.18-17.11 45.055-42.936 45.055-24.949 0-37.463-18.551-41.812-29.078l-31.391 13.123c11.136 23.547 33.554 48.103 73.463 48.103 43.652 0 76.922-27.495 76.922-85.159v-146.77h-34.245v13.836c-10.53-11.347-24.93-18.745-44.04-18.745zm3.178 32.018c21.525 0 43.628 18.38 43.628 49.768 0 31.904-22.056 49.487-44.104 49.487-23.406 0-45.185-19.005-45.185-49.184 0-31.358 22.619-50.071 45.66-50.071z};
    \fill[fill=gR] svg {m925.89 91.02c-41.414 0-76.187 32.95-76.187 81.57 0 51.447 38.759 81.959 80.165 81.959 34.558 0 55.768-18.906 68.426-35.845l-28.235-18.787c-7.3268 11.371-19.576 22.484-40.018 22.484-22.962 0-33.52-12.574-40.061-24.754l109.52-45.444-5.6859-13.318c-10.58-26.08-35.26-47.86-67.92-47.86zm1.4268 31.413c14.923 0 25.663 7.9342 30.224 17.447l-73.139 30.57c-3.1532-23.667 19.269-48.017 42.915-48.017z};
  \end{tikzpicture}%
}

\title{Algebraic Geometry}
\begin{document}
\maketitle

\setcounter{section}{-1}

\section{Introduction}
What is algebraic geometry? Broadly speaking, it is the study of the geometry of solutions to systems of polynomial equations. For example, in $\R^2$, if we have the set $X$ of solutions to $\{(x,y)\in \R^2 : x^2+y^2 = 1\}$, then we know that this set forms a circle, and we know lots of geometric facts about circles. If we take a more complicated function, such as $y^2 = x^3-x$, we get something that looks like:

\begin{figure}[H]
\centering
\begin{tikzpicture}
\begin{axis}[axis lines=middle]
\addplot[blue, ultra thick, samples=200, domain=1:3] (x, {(x^3-x)^(0.5)});
\addplot[blue, ultra thick, samples=200, domain=1:3
] (x, {-(x^3-x)^(0.5)});
\addplot[blue, ultra thick, samples=200, domain=-1:0] (x, {(x^3-x)^(0.5)});
\addplot[blue, ultra thick, samples=200, domain=-1:0] (x, {-(x^3-x)^(0.5)});
\end{axis}
\end{tikzpicture}
\end{figure}

If we instead think about complex solutions, we get something of the form of a torus minus a single point, with another rich geometric structure.

In $\C^3$, if $X = \{(x,y,z) \in \C^3 : x^3 + y^3 + z^3 = 1\}$, then $X$ contains 27 lines: $x = -\xi^m y, z = \xi^n$ for $i,j \in \{0,1,2\}$ gives 9 of them, and the other 18 come by rotating $x,y,z$ in this linear system.

In $\R^3$, consider the equation $1+x^3+y^3+z^3 = (1+x+y+z)^3$. %find pic of this

\section{Basic Setup}
Fix a field $K$. We define an \emph{affine n-space over K} to be $\mathbb{A}^n \coloneqq K^n$. Let $A \coloneqq K[x_1,x_2,\ldots,x_n]$ be the polynomial ring in $n$ variables over $K$, and let $S \subseteq A$ be a subset of $A$. We then define $\V(S)$, the \emph{vanishing locus of S} to be the set of all $n$-tuples $(a_1,\ldots,a_n) \in \mathbb{A}^n$ where $f(a_1,\ldots,a_n) = 0$ for all $f \in S$.

\begin{proposition}
\item
\begin{enumerate}
\item $\V(\{0\}) = \mathbb{A}^n$
\item $\V(A) = \emptyset$
\item $\V(S_1\cdot S_2) = \V(S_1) \cup \V(S_2)$, where $S_1\cdot S_2 = \{f_1\cdot f_2 : f_1 \in S_1, f_2 \in S_2\}$.
\item Let $I$ be an index set, $S_i \subseteq A$ for each $i \in I$. Then $\bigcap_{i \in I} \V(S_i) = \V(\bigcup_{i \in I} S_i)$
\end{enumerate}
\end{proposition}
\begin{proof} \textit{1., 2.} are obvious
\begin{enumerate}
\item If $p \in \V(S_1) \cup \V(S_2)$, then either $p \in \V(S_1)$ or $p \in \V(S_2)$. If $p \in \V(S_1)$, then $f_1(p) = 0$ for all $f_1 \in S_1$, and so $f_1(p)\cdot f_2(p) = 0$ for all $f_1 \in S_1, f_2 \in S_2$, so $p \in \V(S_1\cdot S_2)$, and similarly for if $p \in \V(S_2)$.

Conversely, suppose that $p \in \V(S_1\cdot S_2)$, and $p \notin \V(S_1)$. Then there is some $f_1 \in S_1$ with $f_1(p) \neq 0$. But $f_1(p)\cdot f_2(p) = 0$ for all $f_2 \in S_2$, and so $f_2(p) = 0$ for all $f_2 \in S_2)$, so $p \in \V(S_2)$.

\item If $p \in \V(S_i)$ for all $i \in I$, then $f_i(p) = 0$ for all $f_i \in S_i$, and so for all $f \in \bigcup_{i} S_i$, so $p \in \V(\bigcup_{i \in I}S_i)$.

Conversely, if $p \in \V(\bigcup_i S_i)$, then $f(p) = 0$ for all the polynomials in $\bigcup_i S_i$, and so $p \in \bigcap_i S_i$.
\end{enumerate}
\end{proof}
These four properties should remind you of the four axioms for a topology.

A subset of $\mathbb{A}^n$ is \emph{algebraic} if it of the form $\V(S)$ for some $S\subseteq A$. A \emph{Zariski open set} in $\mathbb{A}^n$ is a set of the form $\mathbb{A}^n \setminus \V(S)$ for some $S \subseteq \mathbb{A}^n$. This proposition tells us that the Zariski open sets define a topology on $\mathbb{A}^n$, called the \emph{Zariski topology}.

\underline{Examples:}
\begin{enumerate}
\item $K = \C$. The Zariski open (or closed) subsets of $\C^n = \mathbb{A}^n$ are in particular open (or closed) in the usual Euclidean sense, but not vice versa.
\item For any $K$, consider $\mathbb{A}^1, A = K[x], S \subseteq K[x]$. If $S$ has a non-zero element, then $\V(S)$ is finite. Thus the closed sets are the finite subsets of $\mathbb{A}^1$, and all of $\mathbb{A}^1$. The open sets are $\emptyset$ and all the co-finite sets (i.e. sets with finite complement).
\end{enumerate}

Recall that, if $A$ is any commutative ring with $S \subseteq A$ a subset, then the \emph{ideal generated by S} is the ideal $A \supseteq \angle{S} = \{\sum_{i=1}^q f_ig_i : q \geq 0, f_i \in S, g_i \in A\}$, or the smallest ideal of $A$ containing $S$.

\begin{lemma}
Let $S \subseteq A = K[x_1, \ldots, x_n]$. Then $\V(S) = \V(\angle{S})$.
\end{lemma}
\begin{proof}
If $p \in \V(S)$, then for $f_1, \ldots, f_q \in S; g_1, \ldots, g_q \in A$ we have:
\begin{align*}
\left(\sum_{i=1}^q f_ig_i\right)(p) = \sum_{i=1}^q f_i(p)g_i(p) = \sum_{i=1}^p 0\cdot g_i(p) = 0
\end{align*}
So $p \in \V(\angle{S})$, and so $\V(S)\subseteq \V(\angle{S})$. 

\hspace*{-1em}The other inclusion follows from the fact that $S \subseteq \angle{S}$, we must have $\V(\angle{S}) \subseteq \V(S)$.
\end{proof}

Let $X \subseteq \mathbb{A}^n$ be a subset. Define $I(X) \coloneqq \{f \in A : f(p) = 0 \;\forall p \in X\}$, the \emph{ideal of X}. Note that $I(X)$ is indeed an ideal, since if $f, g \in I(X)$ then $f+g \in I(X)$, and if $f \in I(X), g \in A$, then $f\cdot g \in I(X)$. Note that if $S_1\subseteq S_2 \subseteq A_1$, then $\V(S_2) \subseteq \V(S_1)$, and if $X_1 \subseteq X_2$, then $I(X_2) \subseteq I(X_1)$.

The \emph{radical} of an ideal $I \subset A$ is the set $\sqrt{I} \coloneqq \{x \in A: \exists n\in\N \st x^n \in I\}$. This is defined in general for any commutative ring $A$, not just polynomial rings.

\begin{lemma}
$\sqrt{I}$ is an ideal.
\end{lemma}
\begin{proof}
If $f, g \in \sqrt{I}$, there is $n, m$ such that $f^n, g^m \in I$. Then $(f+g)^{m+n} = \sum_{i=0}^{m+n} \binom{m+n}{i}f^i g^{m+n-i}$. Now for each term in this sum, either we have $i \geq n$ or $m+m-i\geq m$, and so one of these terms is in $I$. Hence by the closure rules for ideals, $(f+g)^{m+n} \in I$, so $f+g \in \sqrt{I}$. Given $f \in \sqrt{I}, g \in A$, we have $(fg)^n = f^n g^n$, and $f^n \in I \implies f^ng^n \in I$, so $fg \in \sqrt{I}$.
\end{proof}

\begin{proposition}
\item
\begin{enumerate}
\item If $X \subseteq \mathbb{A}^n$ is algebraic, then $\V(I(X)) = X$.
\item If $I \subseteq A$ is an ideal, then $I(\V(I)) \supseteq \sqrt{I}$.
\end{enumerate}
\end{proposition}
\begin{proof}
\item
\begin{enumerate}
\item Since $X$ is algebraic $X = \V(I)$ for some $I \subseteq A$. Certainly $I \subseteq I(X)$, and so $\V(I(X)) \subseteq \V(I) = X$. But $X \subseteq \V(I(X))$ trivially, and so $X = \V(I(X))$.

\item If $f \in \sqrt{I}$, then $f^n \in I$ for some $n$, and so $f^n$ vanishes on $\V(I)$, thus $f$ vanishes on $\V(I)$. Hence $f \in I(\V(I))$.
\end{enumerate}
\end{proof}
\begin{theorem}[Hilbert Nullstellensatz]
Let $K$ be algebraically closed. Then $I(\V(I)) = \sqrt{I}$.
\end{theorem}
\begin{proof}
Deferred until later.
\end{proof}

\hspace*{-1em}\underline{Example:} If $K = \R$, $I = \angle{x^2+y^2+1} \subseteq \R[x,y]$, then $\V(I) = \emptyset$, so $I(\V(I)) = \R[x,y] \neq \sqrt{I}$.

\hspace*{-1em}We define an \emph{affine (algebraic) variety} to be an algebraic subset of $\mathbb{A}^n$. Very often we can decompose affine varieties into smaller subsets. For instance, $\V(\angle{xy}) = + = - \cup | = \V(\angle{x}) \cup \V(\angle{y})$. If $Y \subseteq X$ is a non-empty closed subset, then we say $Y$ is \emph{irreducible} if whenever $Y = Y_1 \cup Y_2$ with $Y_1, Y_2$ closed, then either $Y_1 = Y$ or $Y_2 = Y$.  In the Euclidean topology on $\C^n$, the irreducible subsets are single points, but under the Zariski topology they are much more interesting. We will now turn to the question of identifying when an algebraic set is irreducible.

\begin{proposition}
If $X_1, X_2 \subseteq \mathbb{A}^n$, then $I(X_1 \cup X_2) = I(X_1) \cap I(X_2)$.
\end{proposition}
\begin{proof}
Since $X_1, X_2 \subseteq X_1 \cup X_2, I(X_1 \cup X_2) \subseteq I(X_1), I(X_2)$. Hence $I(X_1 \cup X_2) \subseteq I(X_1) \cap I(X_2)$.

Conversely, if $f \in I(X_1) \cap I(X_2)$, then $f$ vanishes on both $X_1$ and $X_2$, and so on all of the union. So $I(X_1) \cap I(X_2) \subseteq I(X_1 \cup X_2)$.
\end{proof}

Recall that an ideal $P \subseteq A$ of a commutative ring is said to be \emph{prime} if it is not the whole ring, and whenever $fg \in P$, either $f \in P$ or $g \in P$.

\begin{lemma}
Let $P \subseteq A$ be prime, and $I_1, \ldots, I_n \subseteq A$ be ideals. Suppose that $P \supseteq \bigcap_i I_i$. Then there is some $i$ such that $P \supseteq I_i$, and if equality holds in either then it holds in both.
\end{lemma}
\begin{proof}
Suppose $P \nsupseteq I_i$ for any $i$, so for all $i$ there is some $x_i \in I_i \setminus P$. Then $x = \prod_i x_i \in I_i$ for all $i$, so $x \in \bigcap_i I_i$ and hence $x \in P$. But then some $x_i \in P$ because $P$ is prime. \contr

If we have equality, then $P \subseteq I_i$ for all $i$, and by above there is some $i$ for which $P \supseteq I_i$, so $P = I_i$.
\end{proof}

\begin{proposition}
Let $K$ be algebraically closed. Then an algebraic set $X \subseteq \mathbb{A}^n$ is irreducible if and only if $I(X)$ is prime.
\end{proposition}
\begin{proof}
\item
\begin{itemize}
\item[$\implies$] If $f\cdot g \in I(X)$, then $X \subseteq \V(f\cdot g) = \V(f) \cup \V(g)$. So $X = (X \cap \V(f)) \cup (X \cap \V(g))$. Irreducibility implies that \textsc{wlog} $X = X\cap \V(f)$, i.e. $X \subseteq \V(f)$ as $\V(f), \V(g), X$ are closed. Then $f \in I(X)$, and so $I(X)$ is prime.

\item[$\impliedby$] If $P$ is prime with $\V(P) = X_1 \cup X_2$, $X_1, X_2$ closed. Then $I(X_1) \cap I(X_2) = I(X_1\cup X_2) = I(\V(P)) = \sqrt{P}$ by the Nullstellensatz. But if $f^n \in P$, then $f \in P$, and so $\sqrt{P} = P$. Hence $I(X_1)\cap I(X_2) = P$, and $P = I(X_1)$ or $I(X_2)$, so $\V(P) = X_1$ or $X_2$.
\end{itemize}
\end{proof}
So if $K$ is algebraically closed, then we have a one-to-one correspondence between algebraic subsets and radical ideals, and between irreducible algebraic subsets and prime ideals. This correspondence suggests that, just as prime ideals are the ``building blocks" of ideals, so too are irreducible varieties the building blocks of algebraic sets.

\begin{proposition}
Any algebraic set is a finite union of irreducible varieties.
\end{proposition}
\begin{proof}
Let $\mathcal{S}$ be the set of non-empty closed subsets of $\mathbb{A}^n$ which cannot be written as a finite union of irreducible subsets. Suppose $\mathcal{S} \neq \emptyset$. Then we claim $\mathcal{S}$ has a minimal element with respect to inclusion. 

If not, then there is an infinite descending chain of elements of $\mathcal{S}$, say, $X_1 \supsetneq X_2 \supsetneq \ldots$. If $I_j = I(X_j)$, then we get an \textit{ascending} chain of ideals $I_1 \subsetneq I_2 \subsetneq \ldots$. But since $K[x_1, \ldots, x_n]$ is Noetherian (proven in IB GRM), every ascending chain of ideals is eventually stationary. \contr.

Let $Y \in \mathcal{S}$ be a minimal element. Since $Y \in \mathcal{S}$, $Y$ is not irreducible, and so $Y = Y_1 \cup Y_2$, with $Y_1, Y_2 \neq Y$. Since $Y_i \subsetneq Y$ and $Y$ is minimal in $\mathcal{S}, Y_i \notin \mathcal{S}$, and so can be written as a finite union of irreducible closed subsets. But then $Y$ can also be written as a finite union of irreducible closed subsets.
\end{proof}

If $Y = \bigcup_{i=1}^n Y_i$, with $Y_i$ irreducible varieties, $Y_i \subseteq Y_j$ for $i \neq j$, then $Y_i, \ldots, Y_n$ are the \emph{irreducible components} of $Y$.

\hspace*{-1em}\underline{Example:} $\V(xy) = \V(x)\cup \V(y)$. Note that $\V(x)$ is irreducible because $(x)$ is a prime ideal in $K[x,y]$ - to see this observe $K[x,y]/(x) \cong K[y]$ is an integral domain. So the irreducible component of $\V(xy)$ are $\V(x)$ and $\V(y)$, or the two coordinate axes.

\begin{proposition}
The irreducible components of $Y$ are unique up to ordering.
\end{proposition}
\begin{proof}
Exercise.
\end{proof}

\hspace*{-1em}\underline{Example:} $A = K[x_1, \ldots, x_n]$ is a unique factorisation domain (UFD). If $f \in A\setminus\{0\}$, then $f$ is irreducible if and only if $(f)$ is prime. If instead, $f = f_1\ldots f_n$ is a factorisation into irreducible components, then $\V(f) = \V(f_1)\cup\ldots\cup \V(f_n)$ is the irreducible decomposition  of $\V(f)$.

For instance, $\V(y^2-x^3+x)$, the diagram on the first page of these notes, is irreducible.

\section{Regular and Rational Functions}
In algebraic geometry we are interested in polynomial functions, i.e. $f: \mathbb{A}^n \to K$ for some $f \in A = K[x_1, \ldots, x_n]$. Then, given $X \subseteq \mathbb{A}^n$ closed, we get $f|_X : X \to K$. Note that if there are $f,g \in A$ with $f|_X = g|_X$, then $(f-g)|_X = 0$, and so $f-g \in I(X)$.

Let $X \subseteq \mathbb{A}^n$ be an affine variety. We define the \emph{coordinate ring} of $X$ to be $A(X) \coloneqq A/I(X)$. The lecturer also uses the notation $K[X]$ to mean the same thing. I'm not sure why, but if you ever think we're doing some sort of polynomial ring in an affine variety, it's probably  because of this.

If $X$ is irreducible and $U \subseteq X$ is open, then a \emph{regular function} on $U$ is a function $f:U \to K$ such that, for every $p \in U$, there is an open neighbourhood $p \in V \subseteq U$, and functions $g, h \in A(X)$, with $h(q) \neq 0$ for all $q \in V$ and $f = g/h$ on $V$, i.e. everywhere in $U$ it is \textit{locally} a ratio of two polynomials.

\hspace*{-1em}\underline{Examples:}
\begin{enumerate}
\item $f \in A(X)$ induces $f|_U: U \to K$, which is $f/1$ on $U$ and so regular.
\item If $U \subseteq \mathbb{A}^1$, $U = \mathbb{A}^1 \setminus\{0\}$. Then $g(x)/x^n$ is a regular function on $U$ for any polynomial $g$.
\end{enumerate}

We write for $U \subseteq X$ open, $\mathcal{O}_X(U) \coloneqq \{f:U \to K: f\text{ a regular function}\}$. Note that $\mathcal{O}_X(U)$ is a ring, i.e. sums, products, and differences of regular functions are regular. $\mathcal{O}_X(U)$ is also a $K$-algebra, so we can multiply by scalars in $K$.

\begin{lemma}
$\mathcal{O}_X(X) = A(X)$ if $K$ is algebraically closed.
\end{lemma}
\begin{proof}
Deferred until after Hilbert's Nullstellensatz.
\end{proof}

Recall that, if $A$ is an integral domain, then we define the \emph{field of fractions} of $A$ to be $\Big\{\frac{f}{g} : f \in A, g \in A \setminus\{0\}\Big\}/\thicksim$, with $\frac{f}{g} \thicksim \frac{f'}{g'}$ if $fg' = f'g$. This is, as the name would suggest, a field.

If $X \subseteq \mathbb{A}^n$ is an irreducible variety, then we define the \emph{function field} of $X$ to be the field of fractions of $A(X)$. We denote this $K(X)$. Note that $A(X)$ is an integral domain if and only if $X$ is irreducible. Then $f \in K(X)$ can be written as $f=\frac{g}{h}$ for $g,h \in A(X)$, and this is a regular function on $X \setminus \V(h)$.

\section{Morphisms}
A map $f:X \to Y$ between affine varieties is a \emph{morphism} if:
\begin{enumerate}
\item $f$ is continuous in the Zariski topology (i.e. the induced topologies on $X$ and $Y$)
\item For all open $V \subseteq Y$ and for any regular function $\varphi: V \to K$, the map $\varphi \circ f: f^{-1}(V) \to K$ is also regular.
\end{enumerate}
The lecturer appreciates that this is a conceptually difficult definition, but has no idea how to make it clearer.

If $f:X \to Y$ is a morphism, then for any $\varphi \in A(Y), \varphi\circ f$ is a regular function on $X$, and hence $\varphi \circ f \in A(X)$ by \textbf{2.1}. This defines a map $f^{\#}:A(Y) \to A(X); \varphi \mapsto \varphi\circ f$.

Note that $f^{\#}$ is a $K$-algebra homomorphism:
\begin{itemize}
\item $f^{\#}(\varphi_1+\varphi_2) = (\varphi_1+\varphi_2)\circ f = \varphi_1 \circ f + \varphi_2 \circ f = f^{\#}(\varphi_1) + f^{\#}(\varphi_2)$.
\item $f^{\#}(\varphi_1\cdot\varphi_2) = f^{\#}(\varphi_1)f^{\#}(\varphi)$
\item For $a \in K$, $f^{\#}(a \cdot \varphi) = f^{\#}(a)f^{\#}(\varphi) = af^{\#}(\varphi)$
\end{itemize}

\begin{theorem}
There is a one-to-one correspondence between morphisms $f:X \to Y$ of affine varieties and $K$-algebra homomorphisms $f^{\#}:A(Y)\to A(X)$.
\end{theorem}
\begin{proof}
We've seen how to get $f^{\#}$ from $f$. So now suppose we have $f^{\#}:A(Y) \to A(X)$ a $K$-algebra homomorphism given. Suppose $X \subseteq \mathbb{A}^n, Y \subseteq \mathbb{A}^m$. Then:
\begin{align*}
A(X) = \frac{K[x_1, \ldots, x_n]}{I(X)}\hspace{7em}A(Y) = \frac{K[y_1, \ldots, y_m]}{I(Y)}
\end{align*}
Let $\bar{y_i}$ be the element of $A(Y)$ represented by $y_i$, and let $f_i = f^{\#}(\bar{y_i}) \in A(X)$.

Then let $f: X \to \mathbb{A}^m$ be given by $f(p) = (f_1(p),\ldots, f_m(p))$. We claim that the image of $f$ lies in $Y$.

We have the maps $K[y_1, \ldots, y_m] \xrightarrow{\text{quotient map}} A(Y) \xrightarrow{f^{\#}} A(X)$ given by $y_i \mapsto \bar{y_i} \mapsto f_i$, and so $g \mapsto g(f_1, \ldots, f_m)$.

Then since $g \in I(Y)$, we have $g(f_1, \ldots, f_m) = 0$ in $A(X)$, and so in particular, evaluating at $p$, we get $g(f_1(p), \ldots, f_m(p)) = 0$ as desired. Note that if $\varphi \in A(Y)$ we can write $\varphi = \bar{g}$ for some $g \in K[y_1, \ldots, y_m]$, and then $f^{\#}(\varphi) = g(f_1, \ldots, f_m) \in A(X)$. Hence $f$ is a map from $X$ to $Y$.

Next, we must show that $f:X \to Y$ is a morphism.

For continuity, we show that if $Z \subseteq Y$ is closed, then $f^{-1}(Z) \subseteq X$ is closed. For this, note $I(Z) \supseteq I(Y)$, and write $\overline{I(Z)}$ for the image $I(Z)/I(Y)$ in $A(Y)$. This is the ideal of regular functions on $Y$ vanishing on $Z$.
\begin{align*}
\V(f^{\#}(\overline{I(Z)})) &= \{p \in X : g(p) = 0 \forall g \in f^{\#}(\overline{I(Z)})) \subseteq A(X)\}\\
&= \{p \in X : (h\circ f)(p) = 0 \forall h \in \overline{I(Z)}\}\\
&= \{p \in X : f(p) \in \V(\overline{I(Z)})\}\\
&= \{p \in X : f(p) \in Z \}\\
&= f^{-1}(Z)
\end{align*}
If $I$ denotes the inverse image of $f^{\#}(I(Z))$ under the quotient map $K[x_1, \ldots, x_n] \to A(X)$. Then $\V(I) = \V(f^{\#}(\overline{I(Z)}))$, and in particular $f^{-1}(z)$ is closed.

If $\varphi \in \mathcal{O}_Y(U)$, i.e. $\varphi:U \to K$ is regular, we need to show that $\varphi \circ f: f^{-1}(U) \to K$ is regular. Let $p \in f^{-1}(U)$. Then there exists a neighbourhood $V \subseteq U$ of $f(p)$ on which $\varphi|_V = \frac{g}{h}$ for $g, h \in A(Y)$ with $h$ non-vanishing on $V$.

Then $(\varphi \circ f)|_{f^{-1}(V)} = \varphi|_V \circ f = \frac{g}{h}\circ f = \frac{g\circ f}{h\circ f} = \frac{f^{\#}(g)}{f^{\#}(h)}$. Here, $f^{\#}(g). f^{\#}(h) \in A(X)$, and $f^{\#}(h) = h \circ f$ does not vanish on $f^{-1}(V)$. Hence $\varphi\circ f$ is regular as desired, and hence a morphism.
\end{proof}

The moral of this notationally heavy proof is that a morphism $f: X\to Y$ is given by a choice of polynomials $f_1, \ldots, f_n \in K[x_1, \ldots, x_n]$ such that $f(p) = (f_1(p), \ldots, f_m(p)) \in Y$ for all $p \in X$.

\hspace*{-1em}\underline{Example:} $f: \mathbb{A}^1 \to \mathbb{A}^2; t \mapsto (t, t^2)$, so that $f_1(t) = t, f_2(t) = t^2$. Then $f^{\#}$ is a homomorphism of rings from $K[y_1, y_2] \to K[t]$, with $f^{\#}(y_1) = t, f^{\#}(y_2) = t^2$. Note that $y_1^2-y_2 \in \ker f^{\#}$, so in fact we have a $K$-algebra homomorphism, $f^{\#}:K[y_1, y_2]/(y_1^2-y_2) \to K[t]$, inducing a morphism $f:\mathbb{A}^1 \to Y = \V(y_1^2-y_2)$, a parabola.

We say $X$ and $Y$ as affine varieties are \emph{isomorphic} if there is $f:X \to Y, g:Y \to X$ both morphisms with $f\circ g = \id_Y, g \circ f = \id_X$.

\begin{corollary}
$X$ and $Y$ are isomorphic if and only if $A(X)$ and $A(Y)$ are isomorphic as $K$-algebras.
\end{corollary}

\section{Projective Space}
Consider the two lines $\ell_1 = \V(x), \ell_2 = \V((1+1/t)x + 1)$, for $t$ some parameter in $K$. Then the intersection $\ell_1 \cap \ell_2$ is is a single point for $t \neq \infty$. However, at $t = \infty$ the lines are parallel, and so we have lost this intersection. We think of this as being a failure of compactness, and introduce the idea of projective space to restore this compactness.

Let $U$ be a vector space of dimension $n+1$ over $K$. Then the \emph{projectivization} of $U$, $\P(U)$ is the set of all 1-dimensional subspaces of $U$. We will write $\P^n \coloneqq \P(K^{n+1})$.

For example, $\P^1 = \P(K^2) = \{$nonzero vectors in $K^2\}/$scaling action of $K^{\ast}$, where by this scaling action we identify $(1,1) \thicksim (2,2) \thicksim (-1,-1)$. More formally, this is the quotient space $\left(\mathbb{A}_K^2\setminus\{0\}\right)/ \thicksim$ where $(z_0,z_1) \thicksim (\lambda z_0, \lambda z_1)$ for $\lambda \in K^{\ast}$, so that the equivalence classes of $\thicksim$ are straight lines through the origin.

Why does this ``compactify" $\mathbb{A}^1$? Consider the subset of $\P^1$ given by $\{(z_0, z_1) \in \P^1 : z_0 \neq 0\} = \{(1, z_1/z_0) : z_0 \neq 0, z_1 \in K\}$, using the equivalence relation. But this is isomorphic to $\mathbb{A}^1$, by picking $z_1 = z_0 k$ for $k \in K$, so $\P^1$ contains all the information about $\mathbb{A}^1$ by encoding each element in $\mathbb{A}^1$ as the gradient of a line in $\mathbb{A}^2$, together with some missing information, where $z_0 = 0$. In the $\mathbb{A}^1$ ``view" of $\P^1$, this point is the point at infinity, which seems special or distinguished in some way, but we view it as a line in $\mathbb{A}^2$, it is simply another straight line through the origin $\{(0,t) : t \in K\}$.

We can think of $\P^1$ in another way - if we draw in the unit circle centered on the origin in the $\mathbb{A}^2$ view of $\P^1$, we see we have a bijection between the straight lines through the origin (elements of $\P^1$ as defined) and pairs of antipodal points on the unit circle. So we can also view $\P^1$ as the unit circle in $\mathbb{A}^2$ with antipodal points identified.

\begin{figure}[H]
\centering
\begin{subfigure}{.5\textwidth}
\includegraphics[scale=.1]{plane.png}
\caption{$\P^1$ as the straight lines in $\A^2$, so that points of the same colour are identified}
\end{subfigure}\\
\begin{subfigure}{.4\textwidth}
\includegraphics[scale=.1]{line.png}
\caption{$\P^1$ as the corresponding points in $\A^1$, i.e. the gradients of lines. Note the point at infinity}
\end{subfigure}\hfill
\begin{subfigure}{.4\textwidth}
\includegraphics[scale=.1]{circle.png}
\caption{$\P^1$ as the points on a circle, with antipodal points identified (points of the same colour)}
\end{subfigure}
\end{figure}

For $\P^2_K$, consider $\P^2_K \supseteq \mathcal{U}_0 = \{(z_0,z_1,z_2):z_0 \neq 0\} = \{(1,z_1/z_0,z_2/z_0):z_0\neq 0\} \cong \mathbb{A}_K^2$. The missing stuff at infinity is $\P^2 \setminus \mathcal{U}_0 = \{(0,z_1, z_2): (z_1,z_2) \neq (0,0)\}/$scaling $ \cong \P^1$. Similarly as in the $\P^1$, we can think of $\P^2$ as being a sphere with antipodal points identified.

In general, in $\P^n$ with \emph{homogeneous coordinates} $[z_0, \ldots, z_n]$, (where the square brackets indicates that we are working with an equivalence class of coordinates)\footnote{Also used in literature are the notations $(z_0:z_1:\ldots:z_n)$ or $[z_0:z_1:\ldots:z_n]$} we have subsets $\mathcal{U}_i = \{(z_0, \ldots, z_n):z_i \neq 0\}\cong \mathbb{A}_k^n$ for $0\leq i\leq n$, we have $\P_K^n \setminus \mathcal{U}_i = \P_K^{n-1}$.

\subsection{Projective Varieties}
We want to extend our idea of an affine variety to some sort of ``projective variety" in projective space. The idea of polynomial function in $z_0, \ldots, z_n$ is not well defined on points in projective space, because of the scaling that we have quotiented out by. For instance, take the polynomial $f=z_0 + 1$ as a function on $\P_K^2$. We expect to obtain values in $K$ for $f(p)$ where $p \in \P_K^2$. But $(1,0,0) \thicksim (-1,0,0)$ are equivalent in $\P_K^2$, and $f(1,0,0) = 2, f(-1,0,0) = 0$, so $f$ is not well defined on $\P^2_K$.

It's not so much a problem that the value of the polynomial isn't well defined, and we never really used this property in the affine case. We only cared that the points where it was zero, $\V(f)$, was well defined. Similarly, in the projective case, we can see that the polynomial will have a well defined zero set when $f(A p) = B f(p)$ for fixed constants $A, B$ independent of $p$. Plugging this into the definition of a polynomial, we obtain the following criterion:

A polynomial $f \in K[z_0, \ldots, z_n]$ is \emph{homogeneous of degree d} if $f(\lambda p) = \lambda^d f(p)$ for all $\lambda \in K^{\ast}, p \in \mathbb{A}_K^n$. Equivalently, if the total degree of every term is $d$.
\begin{itemize}
\item $z_0^2 + 2z_1z_2 + 8z_2^2$ is homogeneous, as the total degree of each term is 2.
\item $z_0 + z_1^2 + 2z_2^3 + 1$ is not homogeneous, as the terms have total degree 1, 2, 3, 0 respectively.
\end{itemize}

A \emph{projective hypersurface} in $\P_K^n$ is the vanishing set $\V(f)\subseteq \P_K^n$ for a $f$ a homogeneous polynomial in $K[z_0, \ldots, z_n]$. This \textit{is} well defined, since $f$ is homogeneous.

An ideal in $K[z_0, \ldots, z_n]$ is \emph{homogeneous} if it is generated by homogeneous polynomials, not necessarily of the same degree.
\begin{lemma}
The following two conditions are equivalent for an ideal $I \subseteq K[z_0, \ldots, z_n]$:
\begin{enumerate}
\item $I$ is homogeneous.
\item If $f \in I$, then every constituent in $f$ of degree $r$, denoted $f_{[r]}$ also lies in $I$.
\end{enumerate}
\end{lemma}
By this we mean that every polynomial $f \in K[z_0, \ldots, z_n]$ can be written as a sum $\sum_{r=0}^d f_{[r]}$ where $f_{[r]}$ is homogeneous of degree $r$. For example:
\begin{align*}
z_0 + 2z_1^2 + z_0z_2 + z_2^3 + 3z_2 = \underbrace{0}_{f_{[0]}} + \underbrace{z_0 + 3z_2}_{f_{[1]}} + \underbrace{2z_1^2 + z_0z_2}_{f_{[2]}} + \underbrace{z_2^3}_{f_{[3]}}
\end{align*}
\begin{proof}
\textit{2.}$\implies$\textit{1.} is immediate, since $I$ is generated by the constituent parts of all of its polynomials, which are all homogeneous.

For the other direction, let $I = \angle{f_j}$ where $f_j$ is homogeneous of degree $d_j$. Then for $f \in I$, $f = \sum_j h_j f_j$ where $h_j$ is arbitrary and $f_j$ is homogeneous.

Now split $h_j$ into its constituent homogeneous pieces, so that $h_j = \sum_r h_{j[r]}$, a sum of terms of degree $r$. Then $f_{[r]} = \sum h_{j[d_j-r]} f_{j[r]}$. Now $f_{j[r]} = f_j$ if $r = d_j$, and $0$ otherwise since $f_j$ is homogeneous, so $f_{j[r]} \in I$. Then $f_{[r]}$ is a sum of terms $hg$ for $g \in I, h \in K[z_0, \ldots, z_n]$, and so $f_{[r]} \in I$ as required.
\end{proof}

Let $I \subseteq K[z_0, \ldots, z_n]$ be a homogeneous ideal. Then the associated \emph{projective variety} is $\V(I) = \{P \in \P^n_K : f(P) = 0 \forall f \in I\}$, which by the previous lemma is the same as saying $f(P)$ vanishes for every homogeneous $f \in I$. Projective space then inherits a Zariski topology in three ways:
\begin{enumerate}
\item Closed sets are given by $\V(I)$ for $I \subseteq K[z_0, \ldots, z_n]$ homogeneous.
\item $\P^n_K$ is covered by $n+1$ open sets $\mathcal{U}_i = \P^n_K \setminus \{z_i = 0\}$, each in bijection with $\mathbb{A}^n_K$ which has a Zariski topology, so each $\mathcal{U}_i$ has a Zariski topology. Now declare a subset $C \subseteq \P^n_K$ closed if and only if $C \cap \mathcal{U}_i = 0$ for all $i$.
\item We describe $\P^n_K = \big(\mathbb{A}^{n+1}_K \setminus \{(0,0,0)\}\big)/\thicksim$, and then inherit the topology as a quotient topology of the Zariski topology on $\mathbb{A}_K^n$.
\end{enumerate}
\begin{lemma}
These three topologies are equivalent.
\end{lemma}
\begin{proof}
Exercise for a topology course.
\end{proof}
We call this topology the \emph{Zariski topology on $\P^n_K$}.

Notice that, via description 3, $\P_\C^n$ is a compact topological space and even Hausdorff with respect to the second ``Euclidean" topology, by observing it is a quotient of a unit hypersphere. We will often draw diagrams of projective space using this Euclidean topology, although this structure cannot be detected using the Zariski topology. The Zariski topology is weird, so we don't draw diagrams using it.

Let $\mathcal{U}_0 \subseteq \P_K^n$ be the locus where $Z_0 \neq 0$, and let $X = \V(f)$ for some $f \in K[\mathbf{z}]$. Then $X \cap \mathcal{U}_0$ can be described by $\V\Big(f\big(1, \frac{z_1}{z_0}, \ldots, \frac{z_n}{z_0}\big)\Big)$. As a consequence, every projective variety $X \subseteq \P_K^n$ is a union of $n+1$ affine varieties, as $\bigcup_{i=0}^n X \cap \mathcal{U}_i$.

A projective variety $X \subseteq \P_K^n$ is irreducible if $X$ cannot be written as a union $X = X_1 \cup X_2$ with the $X_i$ nonempty proper subvarieties.

Let $X \subseteq \P_K^n$ be a projective variety. Then the \emph{homogeneous ideal of X} $I^h(X)$ is the ideal generated by all homogeneous polynomials vanishing on $X$.

\begin{lemma}
$X$ is irreducible if and only if $I^h(X)$ is a prime ideal.
\end{lemma}
\begin{proof}
This is the same as in the affine case, observing the following fact: If $J \subseteq K[\mathbf{z}]$ is homogeneous and non-prime then there exist $F, G \in K[\mathbf{z}]$ homogeneous with $FG \in J$ but neither $F$ nor $G$ in $J$.
\end{proof}
Hence, via our discussion in the affine case, every projective variety has a unique irreducible component decomposition. Consider the ideal $I \subseteq K[\mathbf{z}]$ given by $I = \angle{z_0, \ldots z_n}$. Then $\V(I) = \emptyset$ in $\P_K^n$ as $(0,\ldots, 0) \notin \P^n_K$.

\begin{theorem}[Projective Nullstellensatz]
\item
\begin{enumerate}
\item If $I \subseteq K[\mathbf{z}]$ is a homogeneous ideal such that $\V(I) = \emptyset \subseteq \P^n_K$, then $I \supseteq \angle{z_0^m: \ldots: z_n^m}$ for some $m > 0$.

\item If $X = \V(I)$ with $I$ homogeneous, then $I^h(X) = \sqrt{I}$.
\end{enumerate}
\end{theorem}
\begin{proof}
Essentially the same as the affine case, which will come later.
\end{proof}

If $X \subseteq \P^n_K$ is a projective variety, then every algebraic function $X \to \C$ is constant, by Liouville's theorem. This is why we introduce the idea of rational functions.

\subsection{Rational Functions}
Let $X \subseteq \P_K^n$ be an irreducible projective variety. Then we define the \emph{function field} $K(X)  = \left\{\frac{f}{g} : f,g\text{ homogeneous of same degree }, g \in I^h (X)\right\} / \thicksim$, where $\frac{f_1}{g_1} \thicksim \frac{f_2}{g_2} \iff f_1g_2-g_1f_2 \in I^h(X)$.

Note that these ratios of polynomials of the same degree are well defined on projective space - when the scaling term of $\lambda^d$ comes out in the numerator and the denominator it cancels, so that $\frac{f(\lambda z)}{g(\lambda z)} = \frac{f(z)}{g(z)}$.

We need to check that $K(X)$ is well defined, i.e. that the equivalence relation $\thicksim$ is indeed an equivalence relation, and also that $K(X)$ is a field. The first of these requires that $I^h(X)$ is prime.

The set of degree $d$ homogeneous polynomials in variables is a $K$-vector space denoted $\mathcal{O}_{\P^n}(d)$, where $\dim_K \mathcal{O}_{\P^n}(d) = |\{\text{monomials of degree $d$ in $z_0, \ldots, z_n$}\}| = \binom{n+d}{d}$.

We can think of $(n+1)\times(n+1)$ matrices (i.e. elements of $GL(n+1,K)$) as changing coordinates in $K^{n+1}$, and inducing a change of homogeneous coordinates on $\P^n_K$. These changes of coordinates are unique up to scaling, so we have the group of matrices corresponding to changes of homogeneous coordinates given by $\P GL(n+1, K) \cong GL(n+1, K)/\text{scaling}$.

For example, $\P GL(2, \C)$ is the group of M\"obius transformations on $\P^1_\C$.

Let $p_1, \ldots, p_{n+2}$ be a set of points in $\P^n_K$ such that no $n+1$ of these lie in a hyperplane $\V(f)$ for $f \in \mathcal{O}_{\P^n}(1)$. Then there exists a change of coordinates $\phi : \P^n_K \to \P^n_K$ such that:
\begin{align*}
\phi(p_1) &= [1:0:\ldots:0]\\
\phi(p_2) &= [0:1:\ldots:0]\\
&\vdots\\
\phi(p_{n+1}) &= [0:0:\ldots:1]\\
\phi(p_{n+2}) &= [1:1:\ldots:1]
\end{align*}
This is a simple exercise in linear algebra. Hence we can see that $\P GL(n+1, K)$ acts transitively on the set of collections of $n+2$ points in general position. This follows by choosing an appropriate basis of $K^{n+1}$.

\begin{proposition}
Let $F \in \mathcal{O}_{\P^2} (d)$ and assume that $F$ is irreducible. Let $c = \V(F)$ and $\ell \subseteq \P^2$ be a line (i.e. $\ell = \V(G)$ for $G \in \mathcal{O}_{\P^2}(1)$. Then $\#\ell \cap c \leq d$, and in fact there exist positive integers $m_p(c, \ell)$ for $p \in c\cap \ell$ such that $\sum_{p \in c\cap\ell} m_p(c, \ell) = d$.
\end{proposition}
\begin{proof}
Choose coordinates $z_0, z_1, z_2$ on $\P^2_K$ such that the following things hold:
\begin{itemize}
\item $\ell = \V(z_2)$
\item $[0:1:0] \notin c$
\end{itemize}
This implies that $c \cap \ell \subseteq \P_K^2 \setminus \{z_0 = 0\}$. But this is $\P_K^2 \setminus \mathcal{U}_0 \cong \mathbb{A}^2_K$, and so we can work in the affine case.

If we choose $x = \frac{z_1}{z_0}, y = \frac{z_2}{z_0}$, then $c \cap \{z_0 \neq 0\} = \V(f(x_y)), f(x,y) = F(1,x,y)$. Now, since $[0:1:0] \notin c$, $f(x,y)$ has degree $d$ in the $x$ variable. Hence $c\cap \ell = \{f(x,y) = 0\}$, and the result follows by the fundamental theorem of algebra, where the $m_p(c, \ell)$ are the multiplicities of the roots.
\end{proof}
This implies that any two distinct lines in $\P^2_K$ intersect at a point.

in fact, if $C = \V(F_1), D = \V(F_2)$ for $F_i \in \mathcal{O}_{\P^2}(d_i)$ irreducible, then $C \cap D$ is $d_1d_2$ points counted with multiplicity (Bezout's theorem).

\begin{lemma}
Let $F$ and $G$ be homogeneous polynomials that are coprime, with $\deg(F), \deg(G) \leq 2$. Then
\begin{align*}
\# \V(F) \cap \V(G) \leq \deg(F)\deg(G)
\end{align*}
\end{lemma}
\begin{proof}
Omitted, similar to proposition above.
\end{proof}
\begin{proposition}
Let $p_1, \ldots, p_5 \in \P^2_K$, where no three lie on a line. Then there exists a unique \emph{conic curve} $C = \V(F), F \in \mathcal{O}_{\P^2}(2)$ passing through $p_1, \ldots, p_5$. Moreover, $C$ is irreducible.
\end{proposition}
\begin{proof}
Suppose there existed two conics $C_1, C_2$ through the points. Then they intersect at $>4$ points, so they contradict the lemma above. But why does such a conic exist?

Any conic is given by $\V(a_1z_0^2+a_2z_1^2+a_3z_2^2+a_4z_1z_2+a_5z_0z_1+a_6z_0z_2) = \V(F)$ where $(a_1, \ldots, a_6) \in K^2\setminus \{\mathbf{0}\}$. Now each condition that $\V(p_i) = 0$ is a linear condition in the coefficients $a_1, \ldots, a_6$. Linear algebra guarantees a one dimensional solution, but they are all multiples of each other so we get a unique irreducible polynomial $F$, and so $C$ exists and is irreducible.
\end{proof}
If $F \in \mathcal{O}_{\P^2}(3)$, $\V(F)$ is usually called an elliptic curves.

\subsection{The Rational Normal Curve, or the Twisted Cubic, and Other Short Stories}
Suppose we have a map from $\P^1 \to \P^3$, where $[x_0:x_1]\mapsto [x_0^3:x_0^2x_1:x_0x_1^2:x_2^3]$. We call this map the \emph{twisted cubic}. In the affine patch $\{x_0 \neq 0\}$, this is given by $\A^1 \to \A^3; t \mapsto (t, t^2, t^3)$, the \emph{rational normal curve}. The image of this map is an algebraic variety with equations
\begin{align}
z_0z_2 - z_1^2 &= 0\\
z_0z_3 - z_1z_2 &= 0\\
z_1z_3 - z_2^2 &= 0
\end{align}
Take another map from $\P^1 \times \P^1 \to \P^3; ([x_0:x_1], [y_0:y_1]) \mapsto [x_0y_0:x_0y_1:x_1y_0:x_1y_1]$ - it is easy to check this is well defined. This map in injective onto $\P^3$, and its image is precisely the vanishing locus of equation (2) - this can be checked by considering the affine patches where the map becomes a morphism $\mathbb{A}^1 \to \mathbb{A}^3$. The vanishing locus of $(z_0z_3 - z_1z_2)$ endows $\P^1 \times \P^1$ with the structure of a projective algebraic variety.

We call $\Sigma_{1,1} \subseteq \P^3$ the image of $\P^1 \times \P^1$ under this map.
\begin{enumerate}
\item $\Sigma_{1,1}$ contains a family of lines $\{L_t\}_{t \in \P^1}$ such that $L_t \cap L_{t'} = \emptyset$ if $t \neq t'$.
\item There is in fact another family $\{M_t\}_{t \in \P^1}$ of disjoint lines such that $M_t \cap L_{t'} = \ast$, some single point, for all $t, t' \in \P^1$.
\end{enumerate}
We get these lines by fixing one coordinate of $\P^1$ and letting the other vary - in this way injectivity gives the families of lines.

If $X$ is an irreducible projective variety, then its \emph{field of rational functions} is given by
\begin{align*}
K(X) &= \left\{ \frac{F}{G} : F, G \in K[\mathbf{z}] \text{ homogeneous of same degree, } G \notin I^h(X)\right\}/\thicksim\\
\frac{F_1}{G_1} \thicksim \frac{F_2}{G_2} & \iff F_1G_2 - F_2G_2 \in I^h(X)
\end{align*}
However, computing $K(X)$ is a pain - checking if things are members of ideals is a pain to do. Instead, we can compute $K(X)$ via the affine case.

\subsection{Projective Closures}
If $f \in K[z_1, \ldots, z_n]$, then $\V(f) \subseteq \A^n_k.$ If we consider $\A_K^n=\P_K^n\setminus \{z_0 =0\}$, we can consider the Zariski closure of $\V(f)$ in $\P^n_K$. To do this, we need to \emph{homogenize} our polynomials. Say $d$ is the maximum degree of a variable $z_i$ appearing in $f$. Then $f^h \coloneqq z_0^d f(z_1/z_0, \ldots, z_n/z_0)$. For example, if $f(z_1,z_2) = z_1^3 + z_1z_2, f^h(z_0,z_1,z_2) = z_1^3 + z_0z_1z_2$.

Similarly for an ideal $I \subseteq K[z_1, \ldots, z_n]$, we define $I^h$ to be $\angle{f^h | f \in I} \subseteq K[Z_0, \ldots, Z_n]$

\begin{lemma}[Computing Projective Closures]
If $X^0 \subseteq \A^n_K$, is an affine variety given by $\V(I)$, then $\bar{X^0} \subseteq \P^n_K$, $(\A^n_K = \P^n_K \setminus \{z_0 = 0\})$, in the Zariski topology, is given by $\V(I^h)$.
\end{lemma}
\begin{proposition}
Let $X \subseteq \P^n_K$ be an irreducible projective variety given by $\bar{X^0}$ for $X^0 \subseteq \A^n_K$ an affine variety. Then $K(X) = \{\text{Field of fractions of }K[X^0]\} = K(X^0)$.
\end{proposition}

For example:
\begin{enumerate}
\item $K(\P^n_K) \cong K(z_1, \ldots, z_n)$
\item If $C \subseteq \P^3_K$ is the twisted cubic, then $K(C) \cong K(z)$. Then $C$ is the projective closure of $\{(t, t^2, t^3) \subseteq \A^3 : t \in K\}$, which has coordinate ring $K[z]$.
\item Let $\mathbb{G}_m = \V(xy-1) \subseteq \mathbb{A}^2_K$. The coordinate ring of $\mathbb{G}_m$ is the fraction field of $K[z, z^{-1}]$, i.e. $K(z)$. Notice that the fraction field of $K[z] = K(\A^1_K) = K(\P^1_K) = K(z)$, so $\mathbb{G}_m \subseteq \A^1_K \subseteq \P^1_K$.
\end{enumerate}

\begin{proof}[Proof of Lemma]
The goal is to show that $X = \V(I^h)$ is the smallest closed set containing $X^0 = \V(I)$. Assume there exists $Y \supseteq X^0$ closed in $\P^n_K$. Observe that $Y = \V(J)$ for some homogeneous ideal $J \subseteq K[\mathbf{Z}]$. Given any $F \in J$ homogeneous then there exists $f \in K[z_1, \ldots, z_n]$ such that $F = Z_0^d f^h$ for some $d \geq 0$. 

Observe now that $Z_0^d f^h$ vanishes on $X^0$, so $f$ vanishes on $X^0$. This implies that $f \in \sqrt{I}$, or $f^m \in I$ for some $m \geq 1$, and then $(f^m)^h = (f^h)^m \in I^h \implies Z_0^d (f^h)^m \in I^h$. This implies that $J \subseteq \sqrt{I^h}$, so $Y \supseteq X$.
\end{proof}

\begin{proof}[Proof Sketch]
There is a natural bijection between $K(X)$ and $K(X^0)$, obtained as follows:

Given $\frac{f}{g} \in K(X^0)$, then we can produce an element of $K(X)$ by homogenization and topping up the degree: let $m = \max\deg\{f,g\}$. Then $\frac{Z_0^m f(z_1/z_0, \ldots, z_n/z_0)}{Z_0^m g(z_1/z_0, \ldots, z_n/z_0)} \in K(X)$.

Conversely, given  $\frac{F(Z_0, \ldots, Z_n)}{G(Z_0, \ldots, Z_n)}$, we produce a rational function on $X^0$, by $\frac{F(1, z_1, \ldots, z_n)}{G(1, z_1, \ldots, z_n)} \in K(X^0)$. It easy but painful to check that these are mutual inverses.
\end{proof}

Given $\varphi \in K(X)$, write $\varphi = \frac{F}{G}$ for $F, G \in \mathcal{O}_{\P^n}(d)$, and then we obtain a function $\varphi:X \setminus \mathbb{V}(G) \to K$.

Given $F_0, \ldots, F_m \in \mathcal{O}_{\P^n}(d)$, we obtain a map
\begin{align*}
\underline{F}: \P_K^n \setminus \bigcap_i \V(F_i)  &\to \P_K^m\\
[Z_0:\ldots:Z_n] \mapsto [F_0(Z_0, \ldots, Z_n):\ldots:F_n(Z_0,\ldots, Zn)]
\end{align*}
We write $\underline{F}:\P_K^n \dashrightarrow \P_K^m$, where the dashed arrow means the function is partially defined. Given this $\underline{F}$, the set $\bigcap_i \V(F_i)$ is called the \emph{base locus}.

We say two rational maps $\underline{F}, \underline{G}$ are equivalent on a projective variety $X \subseteq \P_K^n$ if $F_iG_j - F_jG_i \in I(X)$ for all $i,j$. note that they can possibly have different base loci.

Given $\varphi:X \dashrightarrow \P_K^n$, an (equivalence class of) rational map $P \in X$ is a \emph{regular point} for $\varphi$ if there exists a representative $\varphi = \underline{F}$ such that $P \notin$ the base locus of $\underline{F} = \bigcap_i \mathbb{V}(F_i)$. We can then define a \emph{morphism} of projective varieties to be a rational map $\varphi: X \dashrightarrow \P_K^n$ with the property that $P$ is a regular for $\varphi$ for all $P \in X$. We write $\varphi: X \to \P_K^m$.

Let $P \in \P_K^n$ be any point and $\P_K^{n-1} \cong H \subseteq \P_K^n$ be a hyperplane such that $P \notin H$. Then define the \emph{projection away from P} as follows: given $Q \in \P_K^n$, let $\overline{PQ}$ be the unique line passing through these points. Then define $\varphi$:
\begin{align*}
\varphi: \P_K^n &\dashrightarrow \P_K^{n-1} \cong H\\
Q &\mapsto \overline{PQ} \cap H
\end{align*}
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=2]
\draw (0,0)--(4,0)--(4,4)--(0,4)--(0,0);
\draw[red] (0,1.3125)--(4,3.5625);
\draw[blue] (0.2,4) -- (1.3,0) node[above right] {$H$};
\draw[red] (0,3.6)--(4,2.8);
\draw[red] (0.6,0)--(3.8,4);

\node[circle, draw, fill, label={[green!80!black]above left:$P$}, inner sep=0.1em, green!80!black] (P) at (3,3) {};
\node[circle, draw, fill, label={above:$Q_1$}, inner sep=0.1em] (Q1) at (2,3.2) {};
\node[circle, draw, fill, label={above right:$\varphi(Q_1)$}, inner sep=0.1em] (pQ1) at (0.32804,3.53439) {};
\node[circle, draw, fill, label={above:$Q_2$}, inner sep=0.1em] (Q2) at (1.4,2.1) {};
\node[circle, draw, fill, label={[shift={(-.6,-.2)}]:$\varphi(Q_2)$}, inner sep=0.1em] (pQ1) at (0.81326,1.76996) {};
\node[circle, draw, fill, label={above left:$Q_3$}, inner sep=0.1em] (Q3) at (3.4,3.5) {};
\node[circle, draw, fill, label={[shift={(-.6,-.3)}]:$\varphi(Q_3)$}, inner sep=0.1em] (pQ1) at (1.12093,0.65115) {};
\end{tikzpicture}
\caption{The projection $\varphi$ away from $P$ in $\P^2$ onto $H \cong \P^1$}
\end{figure}


To honestly check this is a rational map, change coordinates such that $H = \{Z_n = 0\}$ and $P = [0:\ldots:0:1]$. Then the rational map is given by:
\begin{align*}
\P^n &\dashrightarrow \P^n\\
[Z_0\ldots:Z_n] &\mapsto [Z_0:\ldots:Z_{n-1}]
\end{align*}

The \emph{degree d Veronese morphism} is given as follows. Choose a basis for $\mathcal{O}_{\P^n}(d)$, say $F_1, \ldots, F_{\binom{n+d}{d}}$. Then:
\begin{align*}
\mathcal{V}_d:\P^n &\to \P^{\binom{n+d}{d}-1}\\
P &\mapsto [\ldots : F_j(P):\ldots]
\end{align*}
Then the twisted cubic is simply the degree 3 Veronese map of $\P^1$.

Given a rational map $\varphi:X \dashrightarrow Y$ defined by restriction from a rational map $\P^n_K \dashrightarrow \P^m_K$, we define $\Dom \varphi$ to be the  set of all regular points for $\varphi$ on $X$. Then $\varphi$ is said to be \emph{dominant} if $\varphi(\Dom \varphi)$ is Zariski dense.

Let $X$ and $Y$ be irreducible. A rational map $\varphi : X \dashrightarrow Y$ is called \emph{birational} if there exists a rational map $\varphi: Y \dashrightarrow X$ such that $\varphi \circ \psi$ and $\psi \circ \varphi$ are the identity whenever they are defined. We say a projective variety $A$ is birational to another projective variety $B$ whenever there exists some birational map between them, or we might say that $A$ and $B$ are birational.

For example:
\begin{itemize}
\item $A^n$ and $\P^n$ are birational
\item $\V(y^2-x^3)$ is birational to $\A^1$
\item $\V(y^2-x^3+x) \subseteq \A^2_K$ is \textit{not} birational to $\A_K^1$ for $\charr K \neq 2$.
\end{itemize}
\begin{theorem}
Let $X$ and $Y$ be projective varieties. Then $X$ is birational to $Y$ if and only if $K(X) \cong K(Y)$.
\end{theorem}

A \emph{quasi-projective variety} is a Zariski open subset of a projective variety, i.e. $\V(I) \setminus \V(J)$ for two ideals $I, J$. Note that, since $\emptyset$ is a projective variety, every projective variety is also a quasi-projective variety.

\section{Products}
If $X$ and $Y$ are quasi-projective varieties, then $X \times Y$ is also a quasi-projective variety. If $X$ and $Y$ are projective (or irreducible), then $X \times Y$ is also projective (or irreducible), respectively.

This fact relies on the fact that, given $\P^n_K$ and $\P^m_K$, the set $\P^n_K \times \P^m_K$ is naturally a projective variety, and the rest follows from basic topological arguments.

We can approach this from the point of view of creating a Zariski topology on $\P^n_K \times \P^m_K$ using what we already know - a point $P \in \P^n_K \times \P^m_K$ is given by $([a_0:\ldots:a_n],[b_0:\ldots:b_m])$ where we can scale the first and second parts \textit{independently}. We then can consider some appropriate notion of a \emph{bihomogeneous} polynomial in $(n+1)+(m+1)$ variables, obtaining an algebraic structure by using their vanishing loci.

Here however, we will use a slightly different approach:
\subsection{Segre Embedding}
The \emph{Segre embedding} is the map:
\begin{align*}
\sigma_{n,m}:\P^n_K \times \P^m_K &\to \P^{(n+1)(n+1)-1}_K\\
([x_0:\ldots:x_n],[y_0:\ldots:y_m]) &\mapsto [\ldots: x_iy_j:\ldots]
\end{align*}
\begin{claim}
$\sigma_{n,m}$ is injective.
\end{claim}
\begin{proof}
Let $c = [\ldots:C_{ij}:\ldots] \in \Im(\sigma_{n,m})$ and $(a,b) \in \sigma_{n,m}^{-1}(\{c\})$, say $a = [A_0:\ldots:A_n], b = [B_0:\ldots:B_m]$.

We may assume, up to a change of coordinates, that $C_{0,0} = 1$, so $A_0 = B_0 = 1$. This then forces that $B_i = C_{0,i}$ and $A_j = C_{j,0}$, so $a,b$ are unique, so $\sigma_{n,m}$ is injective.
\end{proof}
\begin{claim}
The image of $\sigma_{n,m}$ is closed.
\end{claim}
\begin{proof}
The equations are $\{Z_{ij}Z_{k\ell} - Z_{i\ell}Z_{kj} = 0\}$ for all $i,j,k,\ell$. Checking that $\Im(\sigma_{m,n})$ is equal to the vanishing locus of these equation is a locally affine calculation which is left as an exercise.
\end{proof}
Note that the projection maps
\begin{tikzpicture}
\node (a) at (0,1.2) {$\P_K^n \times \P_K^m$};
\node (b) at (-1.2,0) {$\P_K^n$};
\node (c) at (1.2,0) {$\P_K^m$};
\draw[->] (a) -- node[midway, left] {$\pi_1$} (b);
\draw[->] (a) -- node[midway, right] {$\pi_2$} (c);
\end{tikzpicture}
are both morphisms.

\subsection{The Blow-up}
The \emph{blowup} of $\A^2_K$ at the origin is given as follows:
\begin{align*}
\Bl_{(0,0)}\A^2 = \left\{((x,y),[z:w]) \in \A^2_K \times \P^1_K | xz-yw = 0\right\}
\end{align*}
Since $\A^2 \times \P^1 \to \A^2$ is a morphism, there is an induced morphism:
\begin{align*}
\Bl_{(0,0)}\A^2_K \xrightarrow{\pi} \A^2_K
\end{align*}
If $P \in \A^2_K, P \neq (0,0)$ then $\pi^{-1}(P)$ is exactly one point. In fact, $\Bl_{(0,0)}\A^2 \setminus \pi^{-1}(0,0) \to \A^2_{K}\setminus \{(0,0)\}$ is then invertible, and so $\pi$ is birational map. If instead $P = (0,0)$ then $\pi^{-1}(P) = \P^1_K$.

\begin{figure}
\begin{subfigure}{0.5\textwidth}
\begin{tikzpicture}
\begin{axis}[axis lines=middle, xmin=-3, xmax=3, ymin=-3, ymax=3, xtick=\empty, ytick=\empty, xticklabels=\empty, yticklabels=\empty]
\addplot[olive, domain=-3:3] (x,x);
\addplot[olive, domain=-3:3] (x,2*x);
\addplot[olive, domain=-3:3] (x,1/2*x);
\addplot[olive, domain=-3:3] (x,4*x);
\addplot[olive, domain=-3:3] (x,1/4*x);
\addplot[olive, domain=-3:3] (x,-1*x);
\addplot[olive, domain=-3:3] (x,-2*x);
\addplot[olive, domain=-3:3] (x,-4*x);
\addplot[olive, domain=-3:3] (x,-1/2*x);
\addplot[olive, domain=-3:3] (x,-1/4*x);
\end{axis}
\end{tikzpicture}
\caption{$\A^2$}
\end{subfigure}
\begin{subfigure}{0.5\textwidth}
\begin{tikzpicture}
\begin{axis}[xmin=-3, xmax=3, ymin=-3, ymax=3, xtick=\empty, ytick=\empty, xticklabels=\empty, yticklabels=\empty]
\addplot[red, domain=-3:3] (x, {rad(atan(-x-1))-2});
\addplot[olive, domain=-3:3] (x,{1.5*x-0.4});
\addplot[olive, domain=-3:3] (x,{1.6*x+0.4});
\addplot[olive, domain=-3:3] (x,{1.8*x+1.2});
\addplot[olive, domain=-3:3] (x,{2.2*x+2.5});
\addplot[olive, domain=-3:3] (x,{4*x+8});
\addplot[olive, domain=-3:3] (x,{8*x+30});
\addplot[olive, domain=-3:3] (x,{x-1.5});
\addplot[olive, domain=-3:3] (x,{0.8*x-2});
\addplot[olive, domain=-3:3] (x,{0.5*x-2.5});
\addplot[olive, domain=-3:3] (x,{20*x+55});
\end{axis}
\end{tikzpicture}
\caption{$\Bl_{(0,0)}\A^2$}
\end{subfigure}
\end{figure}
We can think of $\P^1$ as separating lines through the origin based on incoming slope. The notion of blowups can be generalised to $\Bl_Z X$ for $Z \subseteq X$ some closed subvariety.

\section{Smoothness, Tangent Spaces, and Dimension}
Given $X \subseteq \P^n_{\C}$ a variety, we want to know when $X$ viewed in Euclidean space is a manifold.
\begin{figure}[H]
\begin{subfigure}{.5\textwidth}
\centering
\begin{tikzpicture}[scale = 1]
\begin{axis}[xticklabels={,,}, yticklabels={,,,}, xtick=\empty, ytick=\empty]
\addplot[blue, ultra thick, domain=-3:3, samples=200] (x, {x^3-3*x});
\end{axis}
\end{tikzpicture}
\caption{$\V(f)$ for $f = y-x^3+3x$}
\end{subfigure}
\begin{subfigure}{.5\textwidth}
\centering
\begin{tikzpicture}[scale = 1]
\begin{axis}[xticklabels={,,}, yticklabels={,,,}, xtick=\empty, ytick=\empty]
\addplot[blue, ultra thick, domain=0:3] (x, {x^(3/2)});
\addplot[blue, ultra thick, domain=0:3, samples=200] (x, {-x^(3/2)});
\end{axis}
\end{tikzpicture}
\caption{$\V(f)$ for $f = y^2-x^3$}
\end{subfigure}
\end{figure}
The curve on the left is smooth, and forms a manifold, whilst the curve on the right has a cusp, so does not form a manifold. We will end up calling it singular.
\subsection{Hypersurfaces}
Let $X = \V(f) \subseteq \A^n_K$. A line in $\A^n_K$ through a point $P = (a_1, \ldots, a_n) \in X$ is given by
\begin{align*}
L = \{ (a_1+b_1t, \ldots, a_n+b_nt)| t \in K\}
\end{align*}
where $(b_1, \ldots, b_n) \in K^n \setminus \{\mathbf{0}\}$. 

We say $L$ is \emph{tangent to X at P} if $g(t) = f(a_1+b_1t, \ldots, a_n+b_nt)$ vanishes to order 2 at $t=0$. More precisely, let
\begin{align*}
f^{lin} \coloneqq \sum_i \frac{\partial f}{\partial z_i}(P)(z_i-a_i)
\end{align*}
be the \emph{linearisation} of $f$ near $P$. Then we can define the \emph{affine tangent space to X at P} by:
\begin{align*}
T_{X,P}^{aff} \coloneqq \V(f^{lin}) \subseteq \A_K^n
\end{align*}
As a sanity check, make sure that this gives the usual tangent line for $y=f(x)$. Note that $T^{aff}_{X,P}$ is centered at the $P$, not at the origin. By shifting it to the origin by translation by $P$, we get the \emph{tangent space to X at P}, given by:
\begin{align*}
T_{X,P}  = \left\{v \in K^n | \sum v_i \frac{\partial f}{\partial z_i}(P) = 0 \;\forall f \in I\right\}
\end{align*}
where $X = \V(I)$. Then $T_{X,P} + P = T_{X,P}^{aff}$.

For example, in the case $X = \V(y^2-x^3)$, we calculate $f^{lin}$ at $(0,0)$ to be $0$, and so $T_{X, (0,0)}^{aff}$ is $\A^2_K$.

\subsection{Digression On Cubics}
Let $f_2 \in \mathcal{O}_{\P^2}(3)$ such that $\V(f_2)$ is smooth. Then $\V(f^2)$ is an \emph{elliptic curve}. In particular, $K(E)$ is not isomorphic to $K(z)$. We say that $X$ is \emph{rational} if $X$ is birational to $\P^r$ for some $r$.

Let $f_3 \in \mathcal{O}_{\P^3}(3)$. We call $\V(f_3)$ a \emph{cubic surface}. We'll take $f_3 = z_0^2z_1 + z_1^2z_2 + z_2^2z_3+z_3^2z_0$, and let $S = \V(f_3)$. Consider the rational map $\varphi: S \dashrightarrow \P^2$, taking $[z_0:\ldots:z_3]\mapsto [z_0z_3:z_1z_2:z_2z_3]$. We can also take some map $\psi:\P^2 \dashrightarrow S$ such that $\varphi\circ\psi$ and $\psi \circ\varphi$ are the identity map, and so $K(S) = K(z_1,z_2)$, and $S$ is smooth. This holds for any smooth cubic surface in $\P^3_K$, and they are all rational.

If $f_4 \in \mathcal{O}_{\P^4}(3)$, then $\V(f_4) = X$ is sometimes called a \emph{cubic threefold} - it was a landmark result of the late 20\th century to prove that $X$ is not rational.

If $f_5 \in \mathcal{O}_{\P^5}(3)$. and $Y=\V(f_5)$ is a smooth \emph{cubic fourfold}, then the rationality of $Y$ is an open question.

\subsection{Dimension and Smoothness}
Let $X$ be an irreducible variety. Then we define the \emph{dimension} of $X$ as:
\begin{align*}
\dim X = \min_{p \in X} \{\dim T_{X,p}\}
\end{align*}
If $X$ is reducible, the we can write it uniquely as a union of irreducible varieties $X_1 \cup \ldots \cup X_n$, and let $\dim X = \max_{i}\dim X_i$. If all $X_i$ have the same dimension, then $X$ is \emph{pure}.

A point $p \in X$ is said to be \emph{smooth} if $\dim_K X = \dim_K T_{X, p}$, and a non-smooth point is said to be \emph{singular}.

\begin{proposition}
Let $X$ be a variety. Then the set of singular points is a closed proper subvariety.
\end{proposition}
\begin{proof}
It suffices to treat the case where $X$ is affine so $X  = \V(I)$ for $I = \angle{f_1, f_2, \ldots, f_n} \subseteq K[\mathbf{x_i}]$.

Treating $\left(\frac{\partial f_j}{\partial z_i}(p)\right)$ as a matrix, we then have from the definition $\dim_K T_{X,p} = n-\rank \left(\frac{\partial f_j}{\partial z_i}(p)\right)$. The locus where this rank is $\leq n-r$ for any $r \in \N$ is the closed subvariety given by the vanishing of the $(n-r)\times (n-r)$ minors.
\end{proof}
Morally what this tells us, since open subsets of varieties are dense, is that most points on an algebraic variety are smooth points.

\begin{proposition}
If $X$ and $Y$ are irreducible and birational then $\dim X = \dim Y$.
\end{proposition}

Let $\phi : X \dashrightarrow Y$ be a rational map regular at $p \in X$, where $X \subseteq \A_K^n, Y \subseteq \A_K^m$. Then we can write $\phi = (f_1, \ldots, f_m)$, where $f_j \in K(z_1, \ldots, z_n)$ is regular at $p$. We can then define $d\phi_p : T_{X,p} \to T_{Y, \phi(p)}$, the \emph{differential of $\phi$ at p}, defined by:
\begin{align*}
d\phi_p(\mathbf{v}) = \left(\sum_{i=1}^n v_i \frac{\partial f_j}{\partial z_i}(p)\right)_j
\end{align*}
It follows from the chain rule that $d\phi_p(\mathbf{v})$ does indeed lie in $T_{Y, \phi(p)}$ - checking this is left as an exercise.

If $X \dashrightarrow_\phi Y \dashrightarrow_\psi Z$, and $p \in \dom(\phi)$, $\phi(p) \in \dom(\psi)$, then $d\psi_{\phi(p)}\circ d\phi_p = d(\psi \circ \phi)_p$.

Proposition \textbf{6.2} follows immediately from this.

We might ask the following question: if $X$ is a variety, is $X$ isomorphic to a \emph{hypersurface}? The answer to this question is no - consider $X = \V(xy,yz,zx)$, a union of the coordinate axes in $\A^3$. We might think this is isomorphic (it is certainly \textit{homeomorphic}) to a \emph{planar triple point}, e.g. $\A^2 \supseteq Y = \V(xy(x-y))$. Then $X \ncong Y$ because the dimension $T_{X,(0,0,0)}$ is 3, and $Y$ can have no such point.

\begin{theorem}
Given any irreducible variety $X$ there exists a hypersurface $Y$ such that $X$ is birational to $Y$, i.e. $K(X) = K(Y)$.
\end{theorem}
The proof of this will come later, but first we'll have a short digression on field theory.

Let $L$ be a finitely generated field extension of $K$. The field $L$ is called a \emph{purely transcendental extension} of $K$ if there exist elements $x_1, \ldots, x_n$ algebraically independent\footnote{i.e. with no polynomial equation in $x_i, i \neq j$ with $x_j$ a root.} over $K$ such that $L = K(x_1, \ldots, x_n)$.

\begin{proposition}
Let $L/K$ be a finitely generated field extension. Then there exists a subfield $K \subseteq M \subseteq L$ purely transcendental over $K$ such that $L/M$ is algebraic and separable. Moreover, $L = M(y)$ for some $y \in L$.
\end{proposition}
\begin{proof}[Proof (Characteristic 0)]
Since $L$ is finitely generated, we know that $L = K(x_1, \ldots, x_m)$. There is a maximal algebraically independent subset of $\{x_i\}$. Re-order this set such that $\{x_1,\ldots, x_n\}$ form this subset. Then take $M = K(x_1, \ldots, x_n)$, which is purely transcendental. Then by finite generation $L/M$ is finite and algebraic, and in characteristic 0 separability is automatic. For the final statement, apply the theorem of the primitive element.
\end{proof}
The integer $n$ will turn out to be unique and equal to $\dim X$ where $X$ is a variety with $K(X) = L$.
\begin{proposition}
Let $L = K(x_1, \ldots, x_n)$ be pure transcendental, and $x_{n+1}$ is algebraic. Then the ideal $I = \{g \in K[z_1, \ldots, z_{n+1}] : g(\mathbf{x}) = 0\}$ is principal, i.e. $I = (f)$. Moreover, if $f$ contains the variable $z_i$, then the set $\{x_1, \ldots, x_{i-1}, x_{i+1}, \ldots, x_{n+1}\}$ is algebraically independent.
\end{proposition}
\begin{proof}
Since $\{x_i\}$ are algebraically independent, the subring $L \supseteq R = K[x_1, \ldots, x_n]$ is isomorphic to the polynomial ring in $n$ variables, and in particular is a UFD.

Then let $h \in L[t]$ be the minimal irreducible polynomial for $x_{n+1}$. Let $b$ be the LCM of the denominators of its coefficients. So then if we take $f = b\cdot h$, where $f \in K[x_1, \ldots, x_n, t]$. Since $h$ is irreducible, the Gauss lemma implies that $f$ is irreducible in $R$.

Let $g \in K[z_1, \ldots, z_{n+1}]$ be an element of $I$. In $K[t]$, $g$ is a multiple of $h$. Again by the Gauss lemma, if $h$ divides $g$ then $f$ divides $g$, and so $I$ is principal and generated by $f$.

For the last part, assume $\{x_1, \ldots, x_{i-1}, x_{i+1}, \ldots, x_{n+1}\}$ was algebraically dependent. Then there exists $g \in I$ not containing $z_i$ such that $g(x_1, \ldots, x_{n+1}) = 0$. But $f$ divides $g$, which is a contradiction.
\end{proof}
\begin{corollary}
If $X$ is an irreducible variety and $K(X)$ is its function field, then:
\begin{align*}
\dim X = \tr \deg_K K(X)
\end{align*}
\end{corollary}
\begin{proof}
Exercise - reduce the the case where $X = \V(f)$ and apply the second part of the previous proposition.
\end{proof}
\begin{proof}[Proof of 6.3]
Given $X$ irreducible, apply the \textbf{6.5} to $K(X)$. So $K(X) \equiv \text{FractionField}(K[z_1, \ldots, z_n]/(f))$
\end{proof}
\begin{theorem}[Affine Nullstellensatz I]
Every maximal ideal in $K[z_1, \ldots, z_n]$ is of the form $m  = (z_1a_1, \ldots, z_na_n)$ for $a_i \in K$. If $I\subsetneq K[\mathbf{z}_i]$ is a non-unit ideal, then $\V(I) \neq \emptyset$.
\end{theorem}
\begin{proof}[Proof in uncountable case]
For the first part, clearly every ideal of that form is maximal. Conversely, let $m \subseteq K[\mathbf{z}_i]$. Consider $L = K[\mathbf{z}_i]/m$, which is a field, and let $a_i = z_i + m$. If $L = K$, then $a_i \in K$ as required. Otherwise, $L/K$ must be transcendental.

Take $t \in L\setminus K$. Then $K \subseteq K(t) \subseteq L$, and $t$ is transcendental. now, let $U_m = \angle{a_1^{m_1}\ldots a_n^{m_n}}$ where $\sum m_i = m$. These are all finite dimensional over $K$, but $\bigcup_m U_m = K$. Observe for each $c \in K$, the elements $\frac{1}{t-c}$ are linearly independent. But there are uncountably many of them. Only finitely many lie in each $U_m$, so we get a contradiction.
\end{proof}

\section{Curves}
An \emph{algebraic curve} is an algebraic variety of dimension 1. 
\begin{proposition}
If $X$ is an irreducible curve and $W \subseteq X$ is a proper closed subvariety, then $w$ is finite.
\end{proposition}
\begin{proof}
We've already proven this for plane curves. We can assume $X$ is affine and let $I(X)$ be the associated ideal, and that $W$ is irreducible. By the Nullstellensatz, we know that $I(X) \subsetneq I(W)$, and let $\varphi : W \injection X$ be the inclusion map - this induces a homomorphism of coordinate rings given by restriction $\varphi^{\ast}: K[X] \to K[W]$.

If $W$ is not a point, then $K[W] \neq K$, so take $t \in K[W] \setminus K$. The element $t$ is transcendental over $K$. Then take $0 \neq x \in K[x]$ with $\varphi^{\ast}(x) = 0$ and $y \in K[X]$ with $\varphi^{\ast}(y) = t$. Note that $x$ and $y$ are algebraically independent, but $\dim X = 1\implies \tr \deg K(X) = 1$ so we get a contradiction.
\end{proof}
\subsection{Basic Structure on Curves}
Let $X$ be an irreducible curve. Given $p \in X$, the \emph{local ring of X at p} is defined to be $\mathcal{O}_{X,p} = \mathcal{O}_p = \{\frac{f}{g} : f,g \in K[X], g(p) \neq 0\}$ - the functions defined on some open set containing $p$.

Then $\mathcal{O}_{X,p} \supseteq m_p = \{F \in \mathcal{O}_{X,p} : F(p) = 0\}$. It is an easy exercise to show that $m_p$ is an ideal, and almost as easy to show that it is maximal. Moreover, $\mathcal{O}_{X,p} \setminus \mathcal{O}_{X,p}^{\ast}$, the set of non-units in $\mathcal{O}_{X,p}$, is precisely $m_p$, so $m_p$ is the unique maximal ideal in $\mathcal{O}_{X,p}$.

This definition of a local ring is similar to one from commutative algebra: a \emph{local ring} is a commutative ring that is not a field with a unique maximal ideal.

For example, if $X$ is an irreducible curve, $\mathcal{O}_{X,p}$ is a local ring. Other examples of local rings include $\C\llbracket t\rrbracket$, the formal power series in $t$, with unique maximal ideal generated by $t$. 

\begin{theorem}
If $X$ is an irreducible curve and $p \in X$ is a smooth point, then the ideal $m_p \trianglelefteq \mathcal{O}_{X,p}$ is principal.
\end{theorem}
We will refer to a generator of $m_o$ as a \emph{local parameter/coordinate} at $p$.
\begin{proof}
Assume $p \in X_0 \subseteq \A_K^n$ is an affine patch of $X$ at $p$. After a change of coordinates, we can assume that $p$ is the origin. We can write $K[X_0] = \frac{K[z_1, \ldots, z_n]}{I(X_0)} = K[x_1, \ldots, x_n]$ as an algebra \underline{\textsc{not}} as a polynomial ring - the $x_i$s can have relations. They are just the images of the $z_i$s under the quotient map.

Then $\mathcal{O}_{X,p} = \mathcal{O}_{X_0,p} = \{\frac{f}{g} : f,g \in K[X_0], g \notin (x_1, \ldots, x_n)\}$. So then $m_p = \{\frac{f}{g} : f,g \in K[X_0], f \in (x_1, \ldots, x_n), g \notin (x_1, \ldots , x_n)\} = x_1\mathcal{O}_{X,p} + \ldots + x_n\mathcal{O}_{X,p}$.

We change coordinates, so that $T_{X,p}^{aff} = T_{X,p} = \{z_2 = z_3 = \ldots = z_n = 0\}$. Since the $z_i$ linearise equations for $X_0$, there exist functions $f_2, \ldots, f_n \in I(X_0)$ such that $f_i = z_i - h_i$ where $h_i$ has no terms of degree $\leq 1$. In $\mathcal{O}_{X,p}$ we have $x_i = h_i(x_1, \ldots, x_n) \in (x_1^2, x_1x_2, \ldots, x_n^2) = m_p^2$.

Note that this implies that the image of $x_1$ inside $m_p/{m_p^2}$ is a generator as a $K$-vector space, $K[X_0]/m = \mathcal{O}_{X,p}/{m_p}$.

In turn, by applying Nakayama's Lemma, we can conclude that $x_1$ generates $m_p$.
\end{proof}
\begin{lemma}[Nakayama's Lemma]
Let $R$ be a local ring with maximal ideal $m$, and let $M$ be a finitely generated $R$-module. If $mM = M$ then $M = 0$.
\end{lemma}
\begin{proof}
\google
\end{proof}
\begin{corollary}
If $(R,m)$ are as above, and if $t_1, \ldots, t_r \in m$ generate $m/m^2$, as an $R/{m}$-vector space, then they generate $m$.
\end{corollary}
This is the corollary we need to finish off the proof.
\begin{proof}
Let $n = \angle{t_1, \ldots, t_n} \subseteq m$. If the images of $\{t_i\}$ generate $m/{m^2}$, then $n+m^2 = m+m^2 \implies n+m^2/n = m+m^2/n \implies m(m/n) = (m/n)$. So by Nakayama, $m/n = 0$, and $m = n$.
\end{proof}

\begin{corollary}
Let $p \in X$ be a smooth point, then $\mathcal{O}_{X,p}$ is a discrete valuation ring, i.e. there exist $\ord_p : K(X)^\ast \to \Z$ such that:
\begin{align*}
\mathcal{O}_{X,p} &= \{f \in K(X)^\ast |\ord_p(f) \geq 0\} \cup \{0\}\\
m_p &= \{f \in \mathcal{O}_{x,p} : \ord_p(f) > 0\}\cup\{0\}
\end{align*}
\end{corollary}
\end{document}
