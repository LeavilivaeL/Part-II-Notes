\documentclass[10pt,a4paper]{article}
\input{./preamble.tex}

\title{Sogic and Let Theory}
\begin{document}
\maketitle

\section{Propositional Logic}
Let $P$ be a set of \emph{primitive propositions}, i.e. $P$ is a set of symbols with $(, ), \bot, \implies \notin P$. Unless stated otherwise (i.e. that $P$ is uncountable), we may assume that $P = \{p_1, p_2, \ldots \}$.

The set of \emph{propositions}, denoted by $L(P)$ or simply just $L$, is defined inductively as follows:
\begin{enumerate}
\item $P \subset L$
\item $\bot \in L$, called \false
\item if $p, q \in L$, then $(p \implies q) \in L$
\end{enumerate}

Each proposition is a string of symbols from $P \cup \{(,),\bot,\implies\}$, for instance we have the propositions $p_1, (p_1 \implies p_1), ((p_1\implies p_2)\implies(p_2 \implies(\bot \implies p_3)))$. For readability, we often draw symbols $(,)$ in different ways, for instance as $[, (, \Big($.

Sometimes we omit the outside pair of parentheses when writing down propositions, for instance $p_1 \implies p_2$ is shorthand for $(p_1 \implies p_2)$.

Also we use some abbreviations, e.g.:
\begin{itemize}
\item[\textsc{Not:}] $\neg p$ to mean $(p \implies \bot)$
\item[\textsc{Or:}] $p \lor q$ to mean $(\neg p \implies q)$
\item[\textsc{And:}] $p \land q$ to mean $\neg(\neg p \lor \neg q)$
\end{itemize}

What do we mean by $L$ ``defined inductively"? Define $L_0 = P \cup \{\bot\}$. Then, given $L_n$, we can define $L_{n+1} = L_{n-1} \cup \{(p\implies q) : p, q \in L_{n-1}\}$. Then we set $L = \bigcup_{n=0}^{\infty} L_n$. Note: if $p \in L \setminus(P \cup \{\bot\})$, then it is easy to show that there are \emph{unique} $q, r \in L$ with $p = (q \implies r)$.

\subsection{Semantic Entailment}
A \emph{valuation} is a function $v: L \to \{0,1\}$ satisfying:
\begin{enumerate}
\item $v(\bot) = 0$
\item For all $p, q \in L, v(p\implies q) = \begin{cases} 0 & v(p) = 1, v(q) = 0 \\ 1 & \ow \end{cases}$.
\end{enumerate}
If $p \in L$ and $v(p) = 1$ for every valuation, we say that $p$ is a \emph{tautology}, and write $\taut p$.

\underline{Examples:}
\begin{enumerate}
\item $\taut (p \implies p)$

\begin{tabular}{c|c}
$v(p)$ & $v(p\implies p)$ \\\hline
0 & 1 \\
1 & 1
\end{tabular}

So this is a tautology.

\item $\taut (p \implies (q \implies p))$

\begin{tabular}{c|c|c|c}
$p$ & $q$ & $q \implies p$ & $p \implies (q \implies p)$\\\hline
0 & 0 & 1 & 1\\
0 & 1 & 0 & 1\\
1 & 0 & 1 & 1\\
1 & 1 & 1 & 1
\end{tabular}

So this is a tautology.

\item Is $\taut (p \implies (q \implies r)) \implies ((p\implies q)\implies(p \implies r))$?

Suppose not. Then for some $p,q,r$ and valuation $v$ we have:

\hspace*{1cm}$v(p \implies (q\implies r)) = 1$\\
\hspace*{1cm}$v((p\implies q)\implies(p \implies r)) = 0$.

So $v(p \implies q) = 1, v(p \implies r) = 0$. Hence $v(p) = 1, v(r) = 0, v(q) = 1$. But then $v(q \implies r) = 0$, and so $v(p \implies(q\implies r)) = 0 \contr$.

\item $\taut ((p \implies \bot) \implies \bot) \implies p$, i.e. $ \neg \neg p \implies p$, i.e. $(\neg p \lor p)$. This is the Law of the Excluded Middle, and is also a tautology.
\end{enumerate}
Note that a valuation is entirely determined by its values on the primitive propositions.
\begin{proposition}
\item
\begin{enumerate}
\item Let $v, w: L \to \{0,1\}$ be valuations with $v|_P = w|_P$. Then $v=w$.
\item Let $f:P \to \{0,1\}$. Then there is a valuation $v:L \to \{0,1\}$ with $v|_P = f$.
\end{enumerate}
\end{proposition}
\begin{proof}\item
\begin{enumerate}
\item We prove this by induction on $n$, so that $v|_{L_n} = w|_{L_n}$. For the base case of $n=0$, $v|_P = w|_P$, and $v(\bot) = 0 = w(\bot)$. Then for the induction step, $v|_{L_{n-1}} = w|_{L_{n-1}}$. Let $p \in L_n \setminus L_{n-1}$. Then $p = (q \implies r)$ for some $q, r \in L_{n-1}$. We know that $v(q) = w(q), v(r) = w(r)$, and so $v(p) = w(p)$.

\item We define $v$ successively on $L_0, L_1, L_2, \ldots$
\begin{itemize}
\item[$L_0$:] Let $v|_P = f$ and let $v(\bot) = 0$
\item[$L_n$:] If $p \in L_n \setminus L_{n-1}$, then $p = (q \implies r)$, and so set $v(p)$ to be 0 if $v(q) = 1, v(r) = 0$, and $1$ otherwise. Since propositions are built up in a unique way, this is indeed a valuation.
\end{itemize}
\end{enumerate}
\end{proof}

Let $S \subset L$. We say that $v$ is a \emph{model} of $S$ if $v$ is a valuation with $v(x) = 1$ for all $x \in S$. If $S = \{p\}$, we say that $v$ is a model of $p$. If every model of $S \subset L$ is a model of $p \in L$, we say that $S$ \emph{semantically entails} $p$, and write $S \taut p$. Note that $\emptyset \taut p$ is exactly the same as $\taut p$.

For example, $\{p, p\implies q\} \taut q$.

\subsection{Syntactic Entailment (Provability)}
Our proof system will have axioms as follows for all $p, q, r \in L$:
\begin{enumerate}
\item[A1] $p \implies (q \implies p)$
\item[A2] $(p \implies (q \implies r)) \implies ((p \implies q) \implies (p \implies r))$
\item[A3] $((p \implies \bot) \implies \bot)\implies p$
\end{enumerate}
Our proof system also has a \emph{deduction rule} known as \emph{modus ponens} (MP): for all $p, q \in L$, from $p$ and $(p \implies q)$ we can deduce $q$.

Note that each axiom is a tautology. For MP, see the last example of \textbf{\textsection 1.1}

Let $S \subset L$ and $p \in L$. A \emph{proof} of $p$ from $S$ is a sequence $t_1, t_2, \ldots, t_n \in L$ of finite length with $t_n = p$ such that, for each $i$, either $t_i$ is an axiom, or $t_i \in S$ (a \emph{hypothesis}), or there exist $j, k < i$ with $t_k = (t_j \implies t_i)$.

If there exists a proof of $p$ from $S$, we say that $S$ \emph{syntactically entails} $p$, or $S$ \emph{proves} $p$, and we write $S \vdash p$. If $S = \emptyset$, we say $p$ is a \emph{theorem} and write $\vdash p$.

\underline{Example: $\vdash (p \implies p)$}\\
Use A2, with $r=p$, to get $(p \implies (q\implies p)) \implies ((p \implies q) \implies (p \implies p))$. Now the first bracket is a theorem by A1, and if we take $q = (p \implies p)$ in the second, we can use modus ponens twice with A1 to deduce the final bracket, that $(p \implies p)$. We will write this formally:

\begin{lemma}
For all $p \in L, \vdash (p \implies p)$
\end{lemma}
\begin{proof}
\item
\begin{enumerate}
\item $(p \implies ((p \implies p) \implies p)) \implies ((p \implies (p\implies p))\implies (p \implies p))$ \hfill (A2)
\item $p \implies ((p \implies p)\implies p)$ \hfill (A1)
\item $(p \implies (p \implies p)) \implies (p \implies p)$ \hfill (MP on 1, 2)
\item $p \implies (p \implies p)$ \hfill (A1)
\item $p \implies p$ \hfill (MP on 3, 4)
\end{enumerate}
\end{proof}
\begin{proposition}[The Deduction Theorem]
Let $S \subset L$ and $p, q \in L$. Then $S \vdash (p \implies q)$ if and only if $S \cup \{p\} \vdash q$.
\end{proposition}
\begin{proof}
Suppose $t_1, \ldots, t_n$ is a proof of $p \implies q$ from $S$. Then $t_1, \ldots, t_n, p, q$ is a proof of $q$ from $S \cup \{p\}$. Suppose that $t_1, \ldots, t_n$ instead is a proof of $q$ from $S \cup \{p\}$. We show by induction on $i$ that $S \vdash (p \implies t_i)$ for each $i$, and then we will be done since $t_n = q$.
\begin{enumerate}
\item If $t_i \in S$:
\begin{itemize}
\item $t_i \implies (p \implies t_i)$ \hfill (A1)
\item $t_i$ \hfill (hypothesis)
\item $(p \implies t_i)$ \hfill (MP)
\end{itemize}
\item If $t_i = p$, use Lemma \textbf{1.2}
\item If $t_j = (t_j \implies t_i)$ for some $j, k < i$, then write down proofs of $(p \implies t_j), (p \implies t_k)$ from $S$. Then append:
\begin{itemize}
\item $(p \implies (t_j \implies t_i)) \implies ((p \implies t_j) \implies (p \implies t_i))$ \hfill (A2)
\item $(p \implies t_j) \implies (p \implies t_i)$ \hfill (MP)
\item $p \implies t_i$ \hfill (MP)
\end{itemize}
\end{enumerate}
\end{proof}

\subsection{The Completeness Theorem and Applications}
The key result of this section will be that $\taut$ and $\vdash$ coincide. There will be two directions to prove:
\begin{enumerate}
\item \emph{Soundness:} If $S \vdash p$ then $S \taut p$.
\item \emph{Adequacy:} If $S \taut p$ then $S \vdash p$.
\end{enumerate}
\begin{proposition}[Soundness Theorem]
Let $S \subset L$ and $p \in L$ with $S \vdash p$. Then $S \taut p$.
\end{proposition}
\begin{proof}
Let $t_1, \ldots, t_n$ be a proof of $p$ from $S$. Let $v$ be a model of $S$. We show by induction on $i$ that $v(t_i) = 1$ for $1 \leq i \leq n$.

If $t_i \in S$ then $v(t_i) = 1$. If $t_i$ is an axiom then $\taut t_i$ so $v(t_i) = 1$. Otherwise, $t_k = (t_j \implies t_i)$ for some $j, k < i$. By the induction hypothesis, $v(t_j) = v(t_j \implies t_i) = 1$, so $v(t_i) = 1$.
\end{proof}

For adequacy, first consider the special case $p = \bot$, i.e. ``If $S \taut \bot$ them $S \vdash \bot$". We will prove the contrapositive: ``If $S \nvdash \bot$ then $S \ntaut \bot$". If $S \nvdash \bot$ we say that $S$ is \emph{consistent}. $`S \taut \bot$" means ``if $v$ is a model of $S$ then $v(\bot)=1$". But $v(\bot) = 0$ for every valuation $v$, so this says ``$S$ has no model." Hence ``$S \ntaut \bot$" says ``$S$ has a model".

\begin{theorem}[Model Existence Lemma]
Let $S \subset L$ be consistent. Then $S$ has a model.
\end{theorem}
\begin{proof}[Proof in the case P is countable]
$L$ is countable, as each $p \in L$ is a finite string of symbols from $P \cup \{(,),\bot,\implies\}$.

We write $L = \{x_1, x_2, \ldots\}$. We shall recursively construct sets $S_n \subset L$ with $S=S_0 \subset S_1 \subset\ldots$ and $S_n$ consistent.

The base case is trivial, as $S_0 = S$ is consistent by hypothesis. Then for $n>0$, we have $S_{n-1}$ consistent. If $S_{n-1} \cup \{\neg x_n\}$ is consistent, let $S_n = S_n\cup \{\neg x_n\}$. Otherwise, $S_{n-1} \cup \{\neg x_n\} \vdash \bot$, and by the deduction theorem, $S_{n-1} \vdash (\neg x_n \implies \bot)$, i.e. that $S_{n-1} \vdash \neg \neg x_n$. But $S_{n-1} \vdash (\neg\neg x_n \implies x_n)$ by (A3), and so $S_{n-1} \vdash x_n$ by (MP). But $S_{n-1}$ is consistent, so let $S_n = S_{n-1} \cup \{x_n\}$.

Then let $\bar{S} = \bigcup_{n=1}^{\infty} S_n$. Firstly, $S_n$ is consistent - suppose $t_1, \ldots, t_n$ is a proof of $\bot$ from $\bar{S}$. Then there is some collection $i_1, \ldots, i_m \in \N$ such that the hypotheses used in the proof come from $S_{i_1}, \ldots, S_{i_m}$. Let $I = \max\{i_1, \ldots, i_m\}$. Then every hypothesis comes from $S_I$, and so $t_1, \ldots, t_n$ is a proof of $\bot$ from $S_I$. \contr

Also, for every $p \in L$ we have $p \in \bar{S}$ or $\neg p \in \bar{S}$. Moreover, $\bar{S}$ is \emph{deductively closed} (d.c): if $\bar{S} \vdash p$ then $p \in \bar{S}$. Indeed, suppose that $\bar{S} \vdash p$ but $p \notin \bar{S}$. Then $\neg p \in \bar{S}$. Now $\bar{S} \vdash p$ and $\bar{S} \vdash \neg p$, i.e. $\bar{S} \vdash (p \implies \bot)$. So by (MP), $\bar{S} \vdash \bot$ \contr. 

Now let $v: L \to \{0,1\}$ be the indicator function of $\bar{S}$. We must check that $v$ is a valuation. As $\bar{S}$ is consistent, it is certainly true that $\bot \notin \bar{S}$, and so $v(\bot) = 0$. 

Let $p, q \in L$. We want to think about $(p \implies q)$:
\begin{itemize}
\item[Case 1.] Suppose $v(q) = 1$. Then $q \in \bar{S}$, so $\bar{S} \vdash (p \implies q)$, but $\bar{S}$ is deductively closed, and so $(p \implies q) \in \bar{S}$, and $v(p \implies q) = 1$.

\item[Case 2.] Suppose $v(p) = 0$. Again, we must show that $v(p \implies q) = 1$, i.e. that $\bar{S} \vdash (p \implies q)$. By the Deduction Theorem, this is equivalent to $S\cup \{p\} \vdash q$, and $p \notin S$, so $\neg p \in S$ and it will be enough to show that $\{p, \neg p\} \vdash q$. We have:
\begin{enumerate}
\item $(p \implies \bot)$ \hfill (hyp)
\item $p$ \hfill (hyp)
\item $\bot$ \hfill (MP on 1,2)
\item $((q \implies \bot)\implies \bot) \implies q$ \hfill (A3)
\item $\bot \implies ((q\implies \bot)\implies \bot)$ \hfill (A1)
\item $(q \implies \bot) \implies \bot$ \hfill (MP on 3,5)
\item $q$ \hfill (MP on 4,6)
\end{enumerate}
\item[Case 3.] $v(p) = 1, v(q) = 0$. We want to show that $v(p \implies q) = 0$. Suppose instead that $v(p \implies q) = 1$, so that $(p \implies q) \in \bar{S}, p \in \bar{S}$. But then by (MP) $\bar{S} \vdash q$, so $q \in \bar{S}$, so $v(q) = 1$. \contr
\end{itemize}
We have now shown that $v$ is a valuation. Moreover, $S \subset \bar{S}$ so $v(p) =1$ for all $p \in S$. Hence $v$ is a model of $S$.
\end{proof}

\end{document}
